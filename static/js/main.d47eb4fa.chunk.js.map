{"version":3,"sources":["images/logo2.png","images/bocadillo.png","images/chocolate.png","images/coca.png","images/cena.png","Contexto.js","Home.js","firebase/firebase.js","Productos.js","Cart.js","Clientes.js","Detalles.js","Test.js","serviceWorker.js","index.js"],"names":["Carrito","React","createContext","children","useState","cantidades","setCantidades","articulos","setArticulos","carrito","data","Provider","value","compare","a","b","fechaA","Disponibles","fechaB","comparison","Home","user","num","categorias","name","src","bocadillo","categ","chocolate","coca","cena","useContext","setData","categoria","setCat","open","setOpen","activeItem","setActiveItem","loading","setLoading","buscar","setBuscar","sacardata","datas","creds","require","doc","GoogleSpreadsheet","useServiceAccountAuth","loadInfo","sheet","sheetsById","getRows","rows","columnCount","cols","headerValues","encabezado","lastr","length","loadCells","startRowIndex","endRowIndex","startColumnIndex","endColumnIndex","j","i","window","getCell","push","console","log","useEffect","Container","Dimmer","active","page","Loader","Modal","closeOnEscape","closeOnDimmerClick","onClose","onOpen","size","Header","Content","Image","Description","price","toFixed","replace","Input","type","min","defaultValue","cant","onChange","e","prevObject","id","amt","Actions","Button","color","onClick","articulo","existe","disponible","Segment","style","display","margin","height","padding","map","cat","Popup","content","trigger","slidesPerView","spaceBetween","cssMode","className","sort","filter","item","Product_Name","toLowerCase","includes","Categoria","TOP","Price","Product_Id","alt","icon","placeholder","SwiperCore","use","Navigation","Pagination","Scrollbar","A11y","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","storage","auth","firestore","currencyFormat","FechaStringShort","fecha","ye","Intl","DateTimeFormat","year","format","mo","month","da","day","makeid","result","characters","charactersLength","charAt","Math","floor","random","Productos","today","Date","yesterday","setDate","getDate","wd","getDay","inicio","setInicio","previewImg","allInputs","imgUrl","imageAsFile","setImageAsFile","imageAsUrl","setImageAsUrl","subir","setSubir","saving","setSaving","nombre","setNombre","setCant","precio","setPrecio","openEdit","setOpenEdit","listaCat","setListaCat","newPCat","setNewPCat","costo","setCosto","handleImageUpload","event","target","files","imageFile","reader","FileReader","preview","document","getElementById","getElementsByTagName","onload","setAttribute","readAsDataURL","options","maxSizeMB","maxWidthOrHeight","useWebWorker","imageCompression","compressedFile","querySelector","registrar","imagen","inventario","bodega","parseFloat","buyprice","compra","saveUpdatedCells","addRow","Precio","Cantidad","Fecha","buydate","registrarNuevo","checkID","pID","Bodega","Costo","temp","templista","key","text","error","ref","put","on","snapShot","err","child","getDownloadURL","then","fireBaseUrl","image","Dropdown","search","selection","label","parseInt","fluid","wrapped","labelPosition","Label","basic","positive","overflowY","Table","unstackable","Row","HeaderCell","Body","Cell","as","rounded","Subheader","href","Cart","dd","mm","getMonth","yyyy","getFullYear","hora","getHours","minutos","getMinutes","forceUpdate","setValue","useForceUpdate","cliente","setCliente","newCliente","setNewCliente","pago","setPago","ttlamt","setTtlamt","payamt","setPayamt","pedido","setPedido","listaClientes","setListaClientes","confirmar","setConfirmar","setConfirmado","QuitarArt","updatedArticulos","reduce","r","d","ActCart","forEach","obj","prop","pos","arr","mapObj","indexOf","Cliente","alert","pedidoid","now","split","join","pay","pend","applyamt","Monto","Payment_Method","Estatus","Entrega","NumPedido","Payment_Amt","sheet2","k","stock","Confirm","header","cancelButton","confirmButton","onCancel","onConfirm","Icon","step","width","disabled","ExcelDateToJSDate","serial","utc_days","date_info","fractional_day","total_seconds","Clientes","startDate","final","setFinal","sort_key","setSortKey","sort_order","setSortOrder","ttlAmt","pagado","setPagado","setResult","saldoInicial","setSaldoInicial","saldoFinal","setSaldoFinal","registrarPago","ordenar","helper","Tel","o","Object","assign","element","Saldo","myArr","montoInicial","pagoInicial","montoFinal","pagoFinal","toUpperCase","marginTop","clearable","backgroundColor","floated","removeDuplicates","Detalles","listaProd","setListaProd","celled","collapsing","colSpan","APP","activeMenu","setActiveMenu","SelectMenu","basename","Logo","overFlowY","path","render","props","Menu","widths","Item","Link","to","circular","floating","Boolean","location","hostname","match","ReactDOM","StrictMode","navigator","serviceWorker","ready","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.d47eb4fa.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo2.6908f740.png\";","export default __webpack_public_path__ + \"static/media/bocadillo.89857570.png\";","export default __webpack_public_path__ + \"static/media/chocolate.6b5b731a.png\";","export default __webpack_public_path__ + \"static/media/coca.cfd4d459.png\";","export default __webpack_public_path__ + \"static/media/cena.2a85bd5b.png\";","import React, { useContext, useState } from \"react\";\r\n\r\nexport const Carrito = React.createContext(null);\r\n\r\nexport default ({ children }) => {\r\n  const [cantidades, setCantidades] = useState(0);\r\n  const [articulos, setArticulos] = useState([]);\r\n  const [data, setData] = useState();\r\n  const carrito = {\r\n    cantidades: [cantidades, setCantidades],\r\n    articulos: [articulos, setArticulos],\r\n    data: [data, setData],\r\n  };\r\n\r\n  return <Carrito.Provider value={carrito}>{children}</Carrito.Provider>;\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./App.css\";\r\nimport bocadillo from \"./images/bocadillo.png\";\r\nimport chocolate from \"./images/chocolate.png\";\r\nimport coca from \"./images/coca.png\";\r\nimport cena from \"./images/cena.png\";\r\nimport { Carrito } from \"./Contexto\";\r\n\r\nimport \"./styles.css\";\r\n// import Swiper core and required modules\r\nimport SwiperCore, { Navigation, Pagination, Scrollbar, A11y } from 'swiper';\r\n\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\n\r\n// Import Swiper styles\r\nimport 'swiper/swiper.scss';\r\nimport 'swiper/components/navigation/navigation.scss';\r\nimport 'swiper/components/pagination/pagination.scss';\r\nimport 'swiper/components/scrollbar/scrollbar.scss';\r\n\r\n// install Swiper modules\r\n\r\nimport {\r\n  Container,\r\n  Segment,\r\n  Header,\r\n  Statistic,\r\n  Table,\r\n  List,\r\n  Popup,\r\n  Image,\r\n  Label,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Dimmer,\r\n  Loader,\r\n  Input,\r\n  Divider,\r\n  Item,\r\n} from \"semantic-ui-react\";\r\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\r\n\r\n\r\nSwiperCore.use([Navigation, Pagination, Scrollbar, A11y]);\r\n\r\nfunction currencyFormat(num) {\r\n  return \"$\" + num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\r\n}\r\n\r\nfunction compare(a, b) {\r\n  // Use toUpperCase() to ignore character casing\r\n  const fechaA = a.Disponibles;\r\n  const fechaB = b.Disponibles;\r\n\r\n  let comparison = 0;\r\n  if (fechaA > fechaB) {\r\n    comparison = -1;\r\n  } else if (fechaA < fechaB) {\r\n    comparison = 1;\r\n  }\r\n  return comparison;\r\n}\r\n\r\nexport default function Home(user) {\r\n  const categorias = [\r\n    { name: \"Snacks\", src: bocadillo, categ: \"Snacks\" },\r\n    { name: \"Dulces\", src: chocolate, categ: \"Dulces\" },\r\n    { name: \"Bebidas\", src: coca, categ: \"Bebida\" },\r\n    { name: \"Otros\", src: cena, categ: \"Otros\" },\r\n  ];\r\n  const topProducts = [\r\n    {\r\n      name: \"KaChitos Clasicos\",\r\n      src: \"https://msflordeloto.com/wp-content/uploads/2020/05/kachitos-de-117-g-.jpg\",\r\n      cat: \"Snacks\",\r\n      price: 0.45,\r\n      id: \"fde03769\",\r\n    },\r\n    {\r\n      name: \"Coca Cola Zero 12oz Lata\",\r\n      src: \"https://cdn.shopify.com/s/files/1/2538/5286/products/651820_1500x1500.jpg?v=1588778658\",\r\n      cat: \"Bebida\",\r\n      price: 0.9,\r\n      id: \"j376FUT4\",\r\n    },\r\n    {\r\n      name: \"Oreo\",\r\n      src: \"http://sipanfood.com/wp-content/uploads/2020/04/galleta-oreo-768x768.jpg\",\r\n      cat: \"Snacks\",\r\n      price: 0.45,\r\n      id: \"hEGF6Jsp\",\r\n    },\r\n  ];\r\n  const {\r\n    [\"cantidades\"]: [cantidades, setCantidades],\r\n  } = useContext(Carrito);\r\n  //const [data, setData] = useState();\r\n  const {\r\n    [\"data\"]: [data, setData],\r\n  } = useContext(Carrito);\r\n  const [categoria, setCat] = useState(\"\");\r\n  const [open, setOpen] = useState(false); //Top Product\r\n  const [activeItem, setActiveItem] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [buscar, setBuscar] = useState(\"\");\r\n  const [carro, setCarro] = useState(0);\r\n  var listaClientes = [];\r\n  const sacardata = async () => {\r\n    setLoading(true);\r\n    var data = [];\r\n    let datas = [];\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[711905343];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    const encabezado = await sheet.headerValues;\r\n    let lastr = rows.length + 1;\r\n    var j, i;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      data = [];\r\n      for (i = 0; i <= cols - 1; i++) {\r\n        window[\"Celda\" + j + i] = sheet.getCell(j, i).value;\r\n        data[`${encabezado[i]}`] = window[\"Celda\" + j + i];\r\n      }\r\n      datas.push(data);\r\n    }\r\n    setData(datas);\r\n    console.log(datas);\r\n    setLoading(false);\r\n  };\r\n  const {\r\n    [\"articulos\"]: [articulos, setArticulos],\r\n  } = useContext(Carrito);\r\n  const agregar = (e) => {\r\n    setOpen(false);\r\n    let articulo = activeItem;\r\n    console.log(articulo);\r\n    let i;\r\n    let existe = false;\r\n    for (i = 0; i < articulos.length; i++) {\r\n      if (articulos[i].name === articulo.name) {\r\n        existe = true;\r\n        articulos[i].cant = articulos[i].cant + 1;\r\n        articulos[i].amt = articulos[i].cant * articulos[i].price;\r\n        break;\r\n      }\r\n    }\r\n    if (!existe) {\r\n      articulos.push(articulo);\r\n    }\r\n    console.log(articulos);\r\n    for (i = 0; i < articulos.length; i++) {\r\n      //let result = articulos.reduce((r, d) => r + d.amt, 0);\r\n      //setTtlamt(result);\r\n    }\r\n    setCantidades(articulos.length);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!data) {\r\n      sacardata();\r\n    }\r\n  }, [data]);\r\n\r\n  return (\r\n    <Container>\r\n      <Dimmer active={loading} page>\r\n        <Loader>Loading</Loader>\r\n      </Dimmer>\r\n      <Modal\r\n        closeOnEscape={false}\r\n        closeOnDimmerClick={false}\r\n        onClose={() => setOpen(false)}\r\n        onOpen={() => setOpen(true)}\r\n        open={open}\r\n        size=\"small\"\r\n      >\r\n        <Modal.Header>{activeItem.name}</Modal.Header>\r\n        <Modal.Content>\r\n          <Image size=\"small\" src={activeItem.src}></Image>\r\n          <Modal.Description>\r\n            <p>\r\n              {activeItem.price\r\n                ? currencyFormat(activeItem.price)\r\n                : activeItem.price}\r\n            </p>\r\n            <p>\r\n              <Input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                defaultValue={activeItem.cant}\r\n                onChange={(e, { value }) => {\r\n                  setActiveItem((prevObject) => ({\r\n                    ...prevObject,\r\n                    name: activeItem.name,\r\n                    price: activeItem.price,\r\n                    src: activeItem.src,\r\n                    id: activeItem.id,\r\n                    cant: value,\r\n                    amt: activeItem.price * value,\r\n                  }));\r\n                }}\r\n              ></Input>\r\n            </p>\r\n          </Modal.Description>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button\r\n            //disabled={activeItem.disponible <= 0}\r\n            color=\"green\"\r\n            onClick={agregar}\r\n          >\r\n            {activeItem.disponible <= 0 ? \"Out of Stock\" : \"Agregar\"}\r\n          </Button>\r\n          <Button\r\n            color=\"red\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n            }}\r\n          >\r\n            Cancelar\r\n          </Button>\r\n        </Modal.Actions>\r\n      </Modal>\r\n      <Segment\r\n        style={{\r\n          display: \"flex\",\r\n          margin: \"auto\",\r\n          height: \"12vh\",\r\n          padding: \"2%\",\r\n        }}\r\n      >\r\n        {categorias.map((cat) => (\r\n          <p style={{ margin: \"auto\" }}>\r\n            <Popup\r\n              content={cat.name}\r\n              key={cat.name}\r\n              trigger={\r\n                <Image\r\n                  src={cat.src}\r\n                  size=\"mini\"\r\n                  onClick={() => {\r\n                    categoria ? setCat(\"\") : setCat(cat.name);\r\n                  }}\r\n                />\r\n              }\r\n            />\r\n            <span style={{ color: cat.name === categoria ? \"red\" : \"black\" }}>\r\n              {cat.name}\r\n            </span>\r\n          </p>\r\n        ))}\r\n      </Segment>\r\n      <Header>Lo Mas Vendido</Header>\r\n      <Segment style={{ padding: \"2%\", height: \"15vh\" }}>\r\n        <Swiper\r\n          slidesPerView={3}\r\n          spaceBetween={15}\r\n          cssMode={true}\r\n          className=\"mySwiper\"\r\n        >\r\n          {data &&\r\n            data\r\n              .sort(compare)\r\n              .filter((item) => {\r\n                return (\r\n                  item.Product_Name.toLowerCase().includes(\r\n                    buscar ? buscar.toLowerCase() : buscar\r\n                  ) &&\r\n                  item.Categoria.toLowerCase().includes(\r\n                    categoria ? categoria.toLowerCase() : categoria\r\n                  ) &&\r\n                  item.TOP === \"Y\"\r\n                );\r\n              })\r\n              .map((item) => (\r\n                <SwiperSlide\r\n                  key={item.id}\r\n                  onClick={() => {\r\n                    open ? setOpen(false) : setOpen(true);\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: item.Product_Name,\r\n                      price: item.Price,\r\n                      src: item.Image,\r\n                      id: item.Product_Id,\r\n                      cant: 1,\r\n                      amt: item.Price,\r\n                      disponible: item.Disponibles,\r\n                    }));\r\n                  }}\r\n                >\r\n                  <img src={item.Image} alt={item.Product_Name}></img>\r\n                </SwiperSlide>\r\n              ))}\r\n        </Swiper>\r\n      </Segment>\r\n      <Input\r\n        icon=\"search\"\r\n        placeholder=\"Buscar...\"\r\n        size=\"small\"\r\n        onChange={(e, { value }) => {\r\n          setBuscar(value);\r\n        }}\r\n      />\r\n\r\n      <Segment style={{ padding: \"2%\", height: \"25vh\" }}>\r\n        <Swiper\r\n          slidesPerView={2}\r\n          spaceBetween={15}\r\n          cssMode={true}\r\n          className=\"mySwiper\"\r\n        >\r\n          {data &&\r\n            data\r\n              .sort(compare)\r\n              .filter((item) => {\r\n                return (\r\n                  item.Product_Name.toLowerCase().includes(\r\n                    buscar ? buscar.toLowerCase() : buscar\r\n                  ) &&\r\n                  item.Categoria.toLowerCase().includes(\r\n                    categoria ? categoria.toLowerCase() : categoria\r\n                  )\r\n                );\r\n              })\r\n              .map((item) => (\r\n                <SwiperSlide\r\n                  key={item.id}\r\n                  onClick={() => {\r\n                    open ? setOpen(false) : setOpen(true);\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: item.Product_Name,\r\n                      price: item.Price,\r\n                      src: item.Image,\r\n                      id: item.Product_Id,\r\n                      cant: 1,\r\n                      amt: item.Price,\r\n                      disponible: item.Disponibles,\r\n                    }));\r\n                  }}\r\n                >\r\n                  <img src={item.Image} alt={item.Product_Name}></img>\r\n                </SwiperSlide>\r\n              ))}\r\n        </Swiper>\r\n      </Segment>\r\n    </Container>\r\n  );\r\n}\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport \"firebase/firestore\";\r\nimport \"firebase/storage\";\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n  apiKey: \"AIzaSyDCP1U2SBSsthFlctoX96-PhEQpl9Mz048\",\r\n  authDomain: \"sam-snacks.firebaseapp.com\",\r\n  projectId: \"sam-snacks\",\r\n  storageBucket: \"sam-snacks.appspot.com\",\r\n  messagingSenderId: \"501193574524\",\r\n  appId: \"1:501193574524:web:2a6565f9fc01aec44a21f9\",\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\nconst storage = firebase.storage();\r\nconst auth = firebase.auth();\r\nconst firestore = firebase.firestore();\r\nconst getUserDocument = async (uid) => {\r\n  if (!uid) return null;\r\n  try {\r\n    const userDocument = await firestore.doc(`users/${uid}`).get();\r\n    return {\r\n      uid,\r\n      ...userDocument.data(),\r\n    };\r\n  } catch (error) {\r\n    console.error(\"Error fetching user\", error);\r\n  }\r\n};\r\nconst generateUserDocument = async (user, additionalData) => {\r\n  if (!user) return;\r\n  const userRef = firestore.doc(`users/${user.uid}`);\r\n  const snapshot = await userRef.get();\r\n  if (!snapshot.exists) {\r\n    const { Nombre, Correo, Apellido } = user;\r\n    try {\r\n      await userRef.set({\r\n        Nombre,\r\n        Correo,\r\n        Apellido,\r\n        ...additionalData,\r\n      });\r\n    } catch (error) {\r\n      console.error(\"Error creating user document\", error);\r\n    }\r\n  }\r\n  return getUserDocument(user.uid);\r\n};\r\nexport {\r\n  storage,\r\n  auth,\r\n  firestore,\r\n  generateUserDocument,\r\n  getUserDocument,\r\n  firebase as default,\r\n};\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./App.css\";\r\nimport bocadillo from \"./images/bocadillo.png\";\r\nimport chocolate from \"./images/chocolate.png\";\r\nimport coca from \"./images/coca.png\";\r\nimport cena from \"./images/cena.png\";\r\nimport imageCompression from \"browser-image-compression\";\r\nimport { storage } from \"./firebase/firebase\";\r\n\r\nimport { Carrito } from \"./Contexto\";\r\nimport {\r\n  Container,\r\n  Segment,\r\n  Header,\r\n  Statistic,\r\n  Table,\r\n  List,\r\n  Popup,\r\n  Image,\r\n  Label,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Dimmer,\r\n  Loader,\r\n  Input,\r\n  Divider,\r\n  Dropdown,\r\n} from \"semantic-ui-react\";\r\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\r\nimport { act } from \"@testing-library/react\";\r\n\r\nfunction currencyFormat(num) {\r\n  return \"$\" + num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\r\n}\r\nfunction FechaStringShort(fecha) {\r\n  var ye = new Intl.DateTimeFormat(\"en\", { year: \"numeric\" }).format(fecha);\r\n  var mo = new Intl.DateTimeFormat(\"en\", { month: \"numeric\" }).format(fecha);\r\n  var da = new Intl.DateTimeFormat(\"en\", { day: \"2-digit\" }).format(fecha);\r\n  var fechaStr = `${ye}-${mo < 10 ? \"0\" + mo : mo}-${da}`;\r\n  return fechaStr;\r\n}\r\nfunction makeid(length) {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction compare(a, b) {\r\n  // Use toUpperCase() to ignore character casing\r\n  const fechaA = a.Disponibles;\r\n  const fechaB = b.Disponibles;\r\n\r\n  let comparison = 0;\r\n  if (fechaA > fechaB) {\r\n    comparison = -1;\r\n  } else if (fechaA < fechaB) {\r\n    comparison = 1;\r\n  }\r\n  return comparison;\r\n}\r\n\r\nexport default function Productos() {\r\n  //Fechas\r\n  //fechas estan erradas hay que corregir\r\n  let today = new Date();\r\n  let yesterday = new Date(today);\r\n  yesterday.setDate(yesterday.getDate() - 1);\r\n  let wd = today.getDay();\r\n  wd === 0 ? (wd = 7) : (wd = wd);\r\n  const [dataSemana, setDS] = useState();\r\n  const [inicio, setInicio] = useState(FechaStringShort(today));\r\n  const [final, setFinal] = useState(FechaStringShort(today));\r\n  //Fechas\r\n  const [loading, setLoading] = useState(false);\r\n  const [data, setData] = useState();\r\n  const [buscar, setBuscar] = useState(\"\");\r\n  const [categoria, setCat] = useState(\"\");\r\n  const dummyImg = \"https://react.semantic-ui.com/images/wireframe/image.png\";\r\n  const [previewImg, setPreviewImg] = useState(dummyImg);\r\n  const [activeItem, setActiveItem] = useState(\"\");\r\n  const allInputs = { imgUrl: \"\" };\r\n  const [imageAsFile, setImageAsFile] = useState(\"\");\r\n  const [imageAsUrl, setImageAsUrl] = useState(allInputs);\r\n  const [subir, setSubir] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [nombre, setNombre] = useState();\r\n  const [cant, setCant] = useState();\r\n  const [precio, setPrecio] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [openEdit, setOpenEdit] = useState(false);\r\n  const [listaCat, setListaCat] = useState();\r\n  const [newPCat, setNewPCat] = useState();\r\n  const [costo, setCosto] = useState(0);\r\n  const categorias = [\r\n    { name: \"Snacks\", src: bocadillo, categ: \"Snacks\" },\r\n    { name: \"Dulces\", src: chocolate, categ: \"Dulces\" },\r\n    { name: \"Bebidas\", src: coca, categ: \"Bebida\" },\r\n    { name: \"Otros\", src: cena, categ: \"Otros\" },\r\n  ];\r\n  const sacardata = async () => {\r\n    setLoading(true);\r\n    var data = [];\r\n    let datas = [];\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[711905343];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    const encabezado = await sheet.headerValues;\r\n    let lastr = rows.length + 1;\r\n    var j, i;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      data = [];\r\n      for (i = 0; i <= cols - 1; i++) {\r\n        window[\"Celda\" + j + i] = sheet.getCell(j, i).value;\r\n        data[`${encabezado[i]}`] = window[\"Celda\" + j + i];\r\n      }\r\n      datas.push(data);\r\n    }\r\n    setData(datas);\r\n    console.log(datas);\r\n    setLoading(false);\r\n  };\r\n\r\n  async function handleImageUpload(event, id) {\r\n    console.log(id);\r\n    if (event.target.files && event.target.files[0]) {\r\n      const imageFile = event.target.files[0];\r\n      var reader = new FileReader();\r\n\r\n      var preview = document.getElementById(id);\r\n      if (id === \"nuevoProd\") {\r\n        preview = preview.getElementsByTagName(\"img\")[0];\r\n      }\r\n      reader.onload = function (e) {\r\n        preview.setAttribute(\"src\", e.target.result);\r\n      };\r\n\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      const options = {\r\n        maxSizeMB: 1,\r\n        maxWidthOrHeight: 1920,\r\n        useWebWorker: true,\r\n      };\r\n      try {\r\n        const compressedFile = await imageCompression(imageFile, options);\r\n        setImageAsFile((imageFile) => compressedFile);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n      setSubir(true);\r\n    } else {\r\n      setSubir(false);\r\n      setImageAsFile(\"\");\r\n      setImageAsUrl(\"\");\r\n      preview = document.querySelector(id);\r\n      preview.setAttribute(\"src\", \"\");\r\n      var archivoSelect = document.querySelector(\"#anexoImg\");\r\n      archivoSelect.value = \"\";\r\n    }\r\n  }\r\n\r\n  const handleFireBaseUpload = (e) => {\r\n    if (subir) {\r\n      if (imageAsFile === \"\") {\r\n        console.error(\r\n          `not an image, the image file is a ${typeof imageAsFile}`\r\n        );\r\n      }\r\n      const uploadTask = storage\r\n        .ref(`/images/${imageAsFile.name}`)\r\n        .put(imageAsFile);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapShot) => {\r\n          //takes a snap shot of the process as it is happening\r\n          console.log(snapShot);\r\n        },\r\n        (err) => {\r\n          //catches the errors\r\n          console.log(err);\r\n        },\r\n        () => {\r\n          // gets the functions from storage refences the image storage in firebase by the children\r\n          // gets the download url then sets the image from firebase as the value for the imgUrl key:\r\n          storage\r\n            .ref(\"images\")\r\n            .child(imageAsFile.name)\r\n            .getDownloadURL()\r\n            .then((fireBaseUrl) => {\r\n              setImageAsUrl((prevObject) => ({\r\n                ...prevObject,\r\n                imgUrl: fireBaseUrl,\r\n              }));\r\n              console.log(fireBaseUrl);\r\n            });\r\n        }\r\n      );\r\n      setSubir(false);\r\n    }\r\n  };\r\n\r\n  const registrar = async () => {\r\n    setSaving(true);\r\n    console.log(activeItem);\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    let sheet = doc.sheetsById[711905343];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    let lastr = rows.length + 1;\r\n    var j;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      if (sheet.getCell(j, 0).value === activeItem.id) {\r\n        const precio = sheet.getCell(j, 2);\r\n        const imagen = sheet.getCell(j, 3);\r\n        const inventario = sheet.getCell(j, 5);\r\n        const bodega = sheet.getCell(j, 8);\r\n        const costo = sheet.getCell(j, 12);\r\n        const categoria = sheet.getCell(j, 4);\r\n        if (imageAsUrl.imgUrl) {\r\n          imagen.value = imageAsUrl.imgUrl;\r\n        }\r\n        categoria.value = activeItem.cat;\r\n        costo.value = parseFloat(activeItem.buyprice);\r\n        precio.value = parseFloat(activeItem.price);\r\n        inventario.value = parseFloat(activeItem.cant+activeItem.compra);\r\n        bodega.value = parseFloat(activeItem.bodega);\r\n        await sheet.saveUpdatedCells();\r\n        break;\r\n      }\r\n    }\r\n    setImageAsUrl(allInputs);\r\n    if (parseFloat(activeItem.compra) > 0) {\r\n      sheet = doc.sheetsById[1860114644];\r\n      const newData = await sheet.addRow({\r\n        Product_Id: activeItem.id,\r\n        Product_Name: activeItem.name,\r\n        Precio: activeItem.buyprice,\r\n        Cantidad: activeItem.compra,\r\n        Categoria: activeItem.cat,\r\n        Fecha: activeItem.buydate,\r\n      });\r\n    }\r\n    setData();\r\n    setSaving(false);\r\n  };\r\n\r\n  const registrarNuevo = async () => {\r\n    setSaving(true);\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    let sheet = doc.sheetsById[711905343];\r\n    var i;\r\n    var pID;\r\n    var checkID = 1;\r\n    do {\r\n      pID = makeid(8);\r\n      checkID = data.filter((item) => {\r\n        return item.Product_Id === pID;\r\n      }).length;\r\n    } while (checkID != 0);\r\n\r\n    let newData = await sheet.addRow({\r\n      Product_Id: pID,\r\n      Product_Name: nombre,\r\n      Price: precio,\r\n      Disponibles: cant,\r\n      Image: imageAsUrl.imgUrl,\r\n      Categoria: newPCat,\r\n      Bodega: 0,\r\n      Costo: costo,\r\n    });\r\n    sheet = doc.sheetsById[1860114644];\r\n    newData = await sheet.addRow({\r\n      Product_Id: pID,\r\n      Product_Name: nombre,\r\n      Precio: costo,\r\n      Cantidad: cant,\r\n      Categoria: newPCat,\r\n      Fecha: inicio,\r\n    });\r\n    setNombre(\"\");\r\n    setCosto(0);\r\n    setCant(0);\r\n    setNewPCat(\"\");\r\n    setImageAsUrl(allInputs);\r\n    setData();\r\n    setSaving(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    !data && sacardata();\r\n    if (data) {\r\n      var temp = categorias;\r\n      let templista = [];\r\n      var i;\r\n      for (i = 0; i < temp.length; i++) {\r\n        templista.push({\r\n          key: temp[i].name,\r\n          value: temp[i].name,\r\n          text: temp[i].name,\r\n        });\r\n      }\r\n      setListaCat(templista);\r\n      console.log(temp);\r\n    }\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    subir && handleFireBaseUpload();\r\n  }, [subir]);\r\n\r\n  return (\r\n    <Container>\r\n      <Dimmer active={loading || saving} page>\r\n        <Loader>{saving ? \"Saving\" : \"Loading\"}</Loader>\r\n      </Dimmer>\r\n\r\n      {activeItem && (\r\n        <Modal\r\n          closeOnEscape={false}\r\n          closeOnDimmerClick={false}\r\n          onClose={() => setOpenEdit(false)}\r\n          onOpen={() => setOpenEdit(true)}\r\n          open={openEdit}\r\n          size=\"fullscreen\"\r\n        >\r\n          <Modal.Header>{activeItem.name}</Modal.Header>\r\n          <Modal.Content image>\r\n            <Image\r\n              size=\"medium\"\r\n              src={activeItem.src}\r\n              id={activeItem.id}\r\n            ></Image>\r\n            <Modal.Description>\r\n              <Dropdown\r\n                placeholder=\"Categoria\"\r\n                defaultValue={activeItem.cat}\r\n                search\r\n                selection\r\n                options={listaCat}\r\n                onChange={(e, { value }) => {\r\n                  setActiveItem((prevObject) => ({\r\n                    ...prevObject,\r\n                    name: activeItem.name,\r\n                    price: activeItem.price,\r\n                    src: activeItem.src,\r\n                    id: activeItem.id,\r\n                    cat: value,\r\n                    cant: activeItem.cant,\r\n                    bodega: activeItem.bodega,\r\n                    compra: 0,\r\n                  }));\r\n                }}\r\n              />\r\n              <p>\r\n                {activeItem.price\r\n                  ? currencyFormat(activeItem.price?activeItem.price:0)\r\n                  : activeItem.price}\r\n              </p>\r\n              <p>\r\n                <Input\r\n                  id=\"inicio\"\r\n                  label=\"Fecha\"\r\n                  size=\"mini\"\r\n                  type=\"date\"\r\n                  defaultValue={inicio}\r\n                  onChange={(e) => {\r\n                    setInicio(e.target.value);\r\n                  }}\r\n                />\r\n              </p>\r\n              <p>\r\n                <Input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  label=\"Compra\"\r\n                  size=\"mini\"\r\n                  defaultValue={0}\r\n                  onChange={(e, { value }) => {\r\n                    value &&\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: activeItem.price,\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cat: activeItem.cat,\r\n                      cant: activeItem.cant,\r\n                      compra: parseInt(value),\r\n                      buydate: inicio,\r\n                      bodega: activeItem.bodega,\r\n                    }));\r\n                    var bodega = document.getElementById(\"bodega_qty\");\r\n                    bodega.value = activeItem.cant + parseInt(value);\r\n                  }}\r\n                ></Input>\r\n                <Input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  label=\"Costo\"\r\n                  size=\"mini\"\r\n                  defaultValue={activeItem.buyprice}\r\n                  onChange={(e, { value }) => {\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: activeItem.price,\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cat: activeItem.cat,\r\n                      cant: activeItem.cant,\r\n                      compra: activeItem.compra,\r\n                      buyprice: value,\r\n                      buydate: inicio,\r\n                      bodega: activeItem.bodega,\r\n                    }));\r\n                  }}\r\n                ></Input>\r\n              </p>\r\n\r\n              <span>Inventario (Disponible - Bodega)</span>\r\n\r\n              <p style={{ display: \"flex\" }}>\r\n                <Input\r\n                  id=\"bodega_qty\"\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  size=\"mini\"\r\n                  defaultValue={activeItem.cant + activeItem.compra}\r\n                  onChange={(e, { value }) => {\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: activeItem.price,\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cat: activeItem.cat,\r\n                      cant: value,\r\n                      bodega: activeItem.bodega,\r\n                    }));\r\n                  }}\r\n                ></Input>\r\n                <Button icon=\"angle left\" />\r\n                <Input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  size=\"mini\"\r\n                  defaultValue={activeItem.bodega}\r\n                  onChange={(e, { value }) => {\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: activeItem.price,\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cat: activeItem.cat,\r\n                      cant: activeItem.cant,\r\n                      bodega: value,\r\n                    }));\r\n                  }}\r\n                ></Input>\r\n              </p>\r\n\r\n              <span>Precio</span>\r\n              <p>\r\n                <Input\r\n                  type=\"number\"\r\n                  min=\"0.01\"\r\n                  size=\"mini\"\r\n                  defaultValue={activeItem.price}\r\n                  onChange={(e, { value }) => {\r\n                    value &&\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: parseFloat(value),\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cat: activeItem.cat,\r\n                      cant: activeItem.cant,\r\n                      bodega: activeItem.bodega,\r\n                    }));\r\n                  }}\r\n                ></Input>\r\n              </p>\r\n\r\n              <span>Imagen</span>\r\n              <p>\r\n                <Input\r\n                  id=\"anexoImg\"\r\n                  fluid\r\n                  className=\"input-image\"\r\n                  type=\"file\"\r\n                  onChange={(e) => {\r\n                    handleImageUpload(e, activeItem.id);\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: precio ? precio : activeItem.price,\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cat: activeItem.cat,\r\n                      cant: cant ? cant : activeItem.cant,\r\n                      bodega: activeItem.bodega,\r\n                    }));\r\n                  }}\r\n                />\r\n              </p>\r\n            </Modal.Description>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            <Button\r\n              //disabled={activeItem.disponible <= 0}\r\n              color=\"green\"\r\n              onClick={() => {\r\n                registrar();\r\n                setOpenEdit(false);\r\n              }}\r\n            >\r\n              Actualizar\r\n            </Button>\r\n            <Button\r\n              color=\"red\"\r\n              onClick={() => {\r\n                setOpenEdit(false);\r\n              }}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      )}\r\n\r\n      <Modal open={open}>\r\n        <Modal.Header>Nuevo Producto</Modal.Header>\r\n        <Modal.Content image>\r\n          <Image size=\"medium\" id=\"nuevoProd\" src={previewImg} wrapped />\r\n          <Modal.Description>\r\n            <Dropdown\r\n              placeholder=\"Categoria\"\r\n              search\r\n              selection\r\n              options={listaCat}\r\n              onChange={(e, { value }) => {\r\n                setNewPCat(value);\r\n              }}\r\n            />\r\n            <p>NOMBRE</p>\r\n            <Input\r\n              type=\"text\"\r\n              onChange={(e) => {\r\n                setNombre(e.target.value);\r\n              }}\r\n            ></Input>\r\n\r\n            <p>\r\n              <Input\r\n                id=\"inicio\"\r\n                label=\"Fecha\"\r\n                size=\"mini\"\r\n                type=\"date\"\r\n                defaultValue={inicio}\r\n                onChange={(e) => {\r\n                  setInicio(e.target.value);\r\n                }}\r\n              />\r\n            </p>\r\n            <p>\r\n              <Input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                label=\"Costo\"\r\n                size=\"mini\"\r\n                defaultValue={costo}\r\n                onChange={(e, { value }) => {\r\n                  setCosto(value);\r\n                }}\r\n              ></Input>\r\n            </p>\r\n            <p>DISPONIBLES</p>\r\n            <Input\r\n              type=\"number\"\r\n              size=\"mini\"\r\n              onChange={(e) => {\r\n                setCant(e.target.value);\r\n              }}\r\n            ></Input>\r\n            <p>PRECIO</p>\r\n            <Input\r\n              labelPosition=\"right\"\r\n              type=\"number\"\r\n              size=\"mini\"\r\n              placeholder=\"Amount\"\r\n              onChange={(e) => {\r\n                setPrecio(e.target.value);\r\n              }}\r\n            >\r\n              <Label basic>$</Label>\r\n              <input\r\n                type=\"number\"\r\n                onChange={(e) => {\r\n                  setPrecio(e.target.value);\r\n                }}\r\n              />\r\n            </Input>\r\n            <p>IMAGEN</p>\r\n            <Input\r\n              id=\"anexoImg\"\r\n              fluid\r\n              className=\"input-image\"\r\n              type=\"file\"\r\n              onChange={(e) => {\r\n                handleImageUpload(e, \"nuevoProd\");\r\n              }}\r\n            />\r\n          </Modal.Description>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color=\"red\" onClick={() => setOpen(false)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            content=\"Guardar\"\r\n            labelPosition=\"right\"\r\n            icon=\"checkmark\"\r\n            onClick={() => {\r\n              setOpen(false);\r\n              registrarNuevo();\r\n            }}\r\n            positive\r\n          />\r\n        </Modal.Actions>\r\n      </Modal>\r\n\r\n      <Segment style={{ display: \"flex\", height: \"10vh\" }}>\r\n        {categorias.map((cat) => (\r\n          <p style={{ margin: \"auto\" }}>\r\n            <Popup\r\n              content={cat.name}\r\n              key={cat.name}\r\n              trigger={\r\n                <Image\r\n                  src={cat.src}\r\n                  size=\"mini\"\r\n                  onClick={() => {\r\n                    categoria ? setCat(\"\") : setCat(cat.name);\r\n                  }}\r\n                />\r\n              }\r\n            />\r\n            <span style={{ color: cat.name === categoria ? \"red\" : \"black\" }}>\r\n              {cat.name}\r\n            </span>\r\n          </p>\r\n        ))}\r\n      </Segment>\r\n      <div style={{ display: \"flex\" }}>\r\n        <Input\r\n          icon=\"search\"\r\n          placeholder=\"Buscar...\"\r\n          size=\"small\"\r\n          onChange={(e, { value }) => {\r\n            setBuscar(value);\r\n          }}\r\n        />\r\n        <Button\r\n          icon=\"add\"\r\n          content=\"Nuevo\"\r\n          color=\"green\"\r\n          onClick={() => {\r\n            setOpen(true);\r\n          }}\r\n        />\r\n      </div>\r\n      <Segment style={{ height: \"50vh\", overflowY: \"scroll\" }}>\r\n        {data && (\r\n          <Table unstackable>\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell>Producto</Table.HeaderCell>\r\n                <Table.HeaderCell>Disponibles</Table.HeaderCell>\r\n                <Table.HeaderCell>Bodega</Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n\r\n            <Table.Body>\r\n              {data\r\n                .sort(compare)\r\n                .filter((item) => {\r\n                  return (\r\n                    item.Product_Name.toLowerCase().includes(\r\n                      buscar ? buscar.toLowerCase() : buscar\r\n                    ) &&\r\n                    item.Categoria.toLowerCase().includes(\r\n                      categoria ? categoria.toLowerCase() : categoria\r\n                    )\r\n                  );\r\n                })\r\n                .map((item) => (\r\n                  <Table.Row>\r\n                    <Table.Cell>\r\n                      <Header as=\"h4\" image>\r\n                        <Image src={item.Image} rounded size=\"mini\" />\r\n                        <Header.Content>\r\n                          {item.Product_Name}\r\n                          <Header.Subheader>\r\n                            {currencyFormat(item.Price)}\r\n                          </Header.Subheader>\r\n                        </Header.Content>\r\n                      </Header>\r\n                    </Table.Cell>\r\n                    <Table.Cell>{item.Disponibles}</Table.Cell>\r\n                    <Table.Cell>{item.Bodega}</Table.Cell>\r\n\r\n                    <Table.Cell>\r\n                      <a\r\n                        href=\"#\"\r\n                        onClick={() => {\r\n                          setActiveItem((prevObject) => ({\r\n                            ...prevObject,\r\n                            name: item.Product_Name,\r\n                            price: item.Price,\r\n                            src: item.Image,\r\n                            id: item.Product_Id,\r\n                            cant: item.Disponibles,\r\n                            bodega: item.Bodega,\r\n                            cat: item.Categoria,\r\n                            compra: 0,\r\n                            buydate: inicio,\r\n                            buyprice: parseFloat(item.Costo),\r\n                          }));\r\n                          setOpenEdit(true);\r\n                        }}\r\n                      >\r\n                        Editar\r\n                      </a>\r\n                    </Table.Cell>\r\n                  </Table.Row>\r\n                ))}\r\n            </Table.Body>\r\n          </Table>\r\n        )}\r\n      </Segment>\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./App.css\";\r\nimport { Carrito } from \"./Contexto\";\r\nimport {\r\n  Container,\r\n  Segment,\r\n  Header,\r\n  Confirm,\r\n  Table,\r\n  List,\r\n  Popup,\r\n  Image,\r\n  Label,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Dimmer,\r\n  Loader,\r\n  Input,\r\n  Dropdown,\r\n} from \"semantic-ui-react\";\r\nimport clientes from \"./clientes.json\";\r\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\r\n\r\nfunction useForceUpdate() {\r\n  const [value, setValue] = useState(0); // integer state\r\n  return () => setValue((value) => value + 1); // update the state to force render\r\n}\r\n\r\nfunction removeDuplicates(myArr, prop) {\r\n  return myArr.filter((obj, pos, arr) => {\r\n    return arr.map((mapObj) => mapObj[prop]).indexOf(obj[prop]) === pos;\r\n  });\r\n}\r\n\r\nfunction currencyFormat(num) {\r\n  return \"$\" + num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\r\n}\r\n\r\nexport default function Cart() {\r\n  //fechas\r\n  let today = new Date();\r\n  var dd = today.getDate();\r\n  var mm = today.getMonth() + 1;\r\n  var yyyy = today.getFullYear();\r\n  var hora = today.getHours();\r\n  var minutos = today.getMinutes();\r\n  dd < 10 ? (dd = \"0\" + dd) : (dd = today.getDate());\r\n  mm < 10 ? (mm = \"0\" + mm) : (mm = today.getMonth() + 1);\r\n  if (hora < 10) hora = \"0\" + hora;\r\n  if (minutos < 10) minutos = \"0\" + minutos;\r\n  let date = yyyy + \"-\" + mm + \"-\" + dd;\r\n  let fecha = date + \" \" + hora + \":\" + minutos;\r\n  //fechas\r\n  const {\r\n    [\"articulos\"]: [articulos, setArticulos],\r\n  } = useContext(Carrito);\r\n  const {\r\n    [\"cantidades\"]: [cantidades, setCantidades],\r\n  } = useContext(Carrito);\r\n  const forceUpdate = useForceUpdate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [cliente, setCliente] = useState();\r\n  const [newCliente, setNewCliente] = useState(false);\r\n  const [pago, setPago] = useState(\"Credito\");\r\n  const [ttlamt, setTtlamt] = useState();\r\n  const [payamt, setPayamt] = useState(0);\r\n  const [pedido, setPedido] = useState(\"Retiro\");\r\n  const [saving, setSaving] = useState(false);\r\n  const [data, setData] = useState();\r\n  const [open, setOpen] = useState(false);\r\n  const [activeItem, setActiveItem] = useState(\"\");\r\n  const [listaClientes, setListaClientes] = useState([]);\r\n  const [confirmar, setConfirmar] = useState(false);\r\n  const [confirmado, setConfirmado] = useState(false);\r\n  const sacardata = async () => {\r\n    setLoading(true);\r\n    var data = [];\r\n    let datas = [];\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[0];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    const encabezado = await sheet.headerValues;\r\n    let lastr = rows.length + 1;\r\n    var j, i;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      data = [];\r\n      for (i = 0; i <= cols - 1; i++) {\r\n        window[\"Celda\" + j + i] = sheet.getCell(j, i).value;\r\n        data[`${encabezado[i]}`] = window[\"Celda\" + j + i];\r\n      }\r\n      datas.push(data);\r\n    }\r\n    setData(datas);\r\n    console.log(datas);\r\n    setLoading(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    !data && sacardata();\r\n    if (data) {\r\n      var temp = removeDuplicates(data, \"Cliente\");\r\n      let templista = [];\r\n      templista.push({ key: \"new\", value: \"new\", text: \"new\" });\r\n      var i;\r\n      for (i = 0; i < temp.length; i++) {\r\n        templista.push({\r\n          key: temp[i].Cliente,\r\n          value: temp[i].Cliente,\r\n          text: temp[i].Cliente,\r\n        });\r\n      }\r\n      setListaClientes(templista);\r\n      console.log(temp);\r\n    }\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    console.log(listaClientes);\r\n  }, [listaClientes]);\r\n\r\n  useEffect(() => {\r\n    if (articulos) {\r\n      var i;\r\n      for (i = 0; i < articulos.length; i++) {\r\n        let result = articulos.reduce((r, d) => r + d.amt, 0);\r\n        setTtlamt(result);\r\n      }\r\n    }\r\n  }, [articulos]);\r\n\r\n  function QuitarArt(name) {\r\n    let updatedArticulos = articulos.filter((item) => {\r\n      return item.name !== name;\r\n    });\r\n    setArticulos(updatedArticulos);\r\n    setCantidades(updatedArticulos.length);\r\n    var i;\r\n    for (i = 0; i < updatedArticulos.length; i++) {\r\n      let result = updatedArticulos.reduce((r, d) => r + d.amt, 0);\r\n      setTtlamt(result);\r\n    }\r\n    if (updatedArticulos.length === 0) {\r\n      setTtlamt(0);\r\n    }\r\n  }\r\n\r\n  function ActCart(name, cant, price) {\r\n    articulos.forEach(function (obj) {\r\n      if (obj.name === name) {\r\n        console.log(obj.name);\r\n        obj.cant = cant;\r\n        obj.amt = cant * price;\r\n      }\r\n    });\r\n    var i;\r\n    for (i = 0; i < articulos.length; i++) {\r\n      let result = articulos.reduce((r, d) => r + d.amt, 0);\r\n      setTtlamt(result);\r\n    }\r\n  }\r\n\r\n  const registrar = async () => {\r\n    if (!cliente) {\r\n      alert(\"Escriba su Nombre Completo\");\r\n    } else {\r\n      setSaving(true);\r\n      const creds = require(\"./samsnacks.json\"); // the file saved above\r\n      const doc = new GoogleSpreadsheet(\r\n        \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n      );\r\n      await doc.useServiceAccountAuth(creds);\r\n      await doc.loadInfo(); // loads document properties and worksheets\r\n      const sheet = doc.sheetsById[0];\r\n      const pedidoid = Date.now() + cliente.split(\" \").join(\"\");\r\n      var i, j, k;\r\n      var applyamt;\r\n      var pay = parseFloat(payamt);\r\n      var pend = parseFloat(payamt);\r\n      console.log(pend);\r\n      for (i = 0; i < articulos.length; i++) {\r\n        applyamt = 0;\r\n        if (ttlamt > pay) {\r\n          console.log(\"cond1\", i, articulos.length, articulos[i].amt, pend);\r\n          if (articulos[i].amt <= pend) {\r\n            applyamt = articulos[i].amt;\r\n            pend = pend - articulos[i].amt;\r\n          } else {\r\n            applyamt = pend;\r\n            pend = 0;\r\n          }\r\n        } else {\r\n          if (i === articulos.length - 1) {\r\n            console.log(\"cond2.1\", i, articulos.length, articulos[i].amt, pend);\r\n            applyamt = pend;\r\n          } else {\r\n            console.log(\"cond2.2\", i, articulos.length, articulos[i].amt, pend);\r\n            applyamt = articulos[i].amt;\r\n            pend = pend - articulos[i].amt;\r\n          }\r\n        }\r\n        const newData = await sheet.addRow({\r\n          Fecha: fecha,\r\n          Cliente: cliente,\r\n          Product_Id: articulos[i].id,\r\n          Product_Name: articulos[i].name,\r\n          Cantidad: articulos[i].cant,\r\n          Monto: articulos[i].amt,\r\n          Payment_Method: pago,\r\n          Estatus: \"Pedido\",\r\n          Entrega: pedido,\r\n          //Tel: tel,\r\n          NumPedido: pedidoid,\r\n          Payment_Amt: applyamt,\r\n        });\r\n      }\r\n\r\n      const sheet2 = doc.sheetsById[711905343];\r\n      const rows = await sheet2.getRows();\r\n      const cols = await sheet2.columnCount;\r\n      const lastr = rows.length + 1;\r\n      await sheet2.loadCells({\r\n        // GridRange object\r\n        startRowIndex: 0,\r\n        endRowIndex: lastr,\r\n        startColumnIndex: 0,\r\n        endColumnIndex: cols,\r\n      });\r\n      for (k = 0; k < articulos.length; k++) {\r\n        for (j = 1; j < lastr; j++) {\r\n          if (sheet2.getCell(j, 0).value === articulos[k].id) {\r\n            const inventario = sheet2.getCell(j, 5);\r\n            let stock = inventario.value;\r\n            console.log(\"Stock\", stock);\r\n            if (stock > 0) {\r\n              stock = stock - parseFloat(articulos[k].cant);\r\n              if (stock < 0) {\r\n                stock = 0;\r\n              }\r\n            }\r\n            inventario.value = stock;\r\n            await sheet2.saveUpdatedCells();\r\n            break;\r\n          }\r\n        }\r\n      }\r\n      alert(`Pedido Realizado, su numero de pedido es ${pedidoid}`);\r\n      setCantidades(0);\r\n      setArticulos([]);\r\n      setTtlamt();\r\n      setCliente();\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const actInventario = async () => {\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[711905343];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    let lastr = rows.length + 1;\r\n    var j;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    var i;\r\n    for (i = 1; i < articulos.length; i++) {\r\n      console.log(articulos[i].id);\r\n      for (j = 1; j < lastr; j++) {\r\n        if (sheet.getCell(j, 0).value === articulos[i].id) {\r\n          const inventario = sheet.getCell(j, 5);\r\n          let stock = inventario.value;\r\n          console.log(\"Stock\", stock);\r\n          if (stock > 0) {\r\n            stock = stock - parseFloat(articulos[i].cant);\r\n          }\r\n          inventario.value = stock;\r\n          await sheet.saveUpdatedCells();\r\n          break;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    activeItem && console.log(activeItem);\r\n  }, [activeItem]);\r\n\r\n  return (\r\n    <Container>\r\n      <Dimmer active={saving || loading} page>\r\n        <Loader>{saving ? \"Saving\" : \"Loading\"}</Loader>\r\n      </Dimmer>\r\n      <Confirm\r\n        header={\"Deseas Eliminar \" + activeItem.name}\r\n        content=\"\"\r\n        cancelButton=\"Cancelar\"\r\n        confirmButton=\"Confirmar\"\r\n        open={confirmar}\r\n        onCancel={() => {\r\n          setConfirmado(false);\r\n          setConfirmar(false);\r\n        }}\r\n        onConfirm={() => {\r\n          setConfirmado(true);\r\n          QuitarArt(activeItem.name);\r\n          setConfirmar(false);\r\n        }}\r\n      />\r\n      {activeItem && (\r\n        <Modal\r\n          closeOnEscape={false}\r\n          closeOnDimmerClick={false}\r\n          onClose={() => setOpen(false)}\r\n          onOpen={() => setOpen(true)}\r\n          open={open}\r\n          size=\"small\"\r\n        >\r\n          <Modal.Header>{activeItem.name}</Modal.Header>\r\n          <Modal.Content>\r\n            <Image size=\"small\" src={activeItem.src}></Image>\r\n            <Modal.Description>\r\n              <p>\r\n                {activeItem.price\r\n                  ? currencyFormat(activeItem.price)\r\n                  : activeItem.price}\r\n              </p>\r\n              <p>\r\n                <Input\r\n                  type=\"number\"\r\n                  min=\"0\"\r\n                  defaultValue={activeItem.cant}\r\n                  onChange={(e, { value }) => {\r\n                    setActiveItem((prevObject) => ({\r\n                      ...prevObject,\r\n                      name: activeItem.name,\r\n                      price: activeItem.price,\r\n                      src: activeItem.src,\r\n                      id: activeItem.id,\r\n                      cant: value,\r\n                      amt: activeItem.price * value,\r\n                    }));\r\n                  }}\r\n                ></Input>\r\n              </p>\r\n            </Modal.Description>\r\n          </Modal.Content>\r\n          <Modal.Actions>\r\n            <Button\r\n              //disabled={activeItem.disponible <= 0}\r\n              color=\"green\"\r\n              onClick={() => {\r\n                ActCart(activeItem.name, activeItem.cant, activeItem.price);\r\n                setOpen(false);\r\n              }}\r\n            >\r\n              Actualizar\r\n            </Button>\r\n            <Button\r\n              color=\"red\"\r\n              onClick={() => {\r\n                setOpen(false);\r\n              }}\r\n            >\r\n              Cancelar\r\n            </Button>\r\n          </Modal.Actions>\r\n        </Modal>\r\n      )}\r\n      <Header>Finalizar Compra</Header>\r\n      <Segment>\r\n        {newCliente ? (\r\n          <Input\r\n            placeholder=\"Nombre Completo\"\r\n            fluid\r\n            onChange={(e, { value }) => {\r\n              setCliente(value);\r\n            }}\r\n          ></Input>\r\n        ) : (\r\n          <Dropdown\r\n            placeholder=\"Nombre Completo\"\r\n            fluid\r\n            search\r\n            selection\r\n            options={listaClientes}\r\n            onChange={(e, { value }) => {\r\n              value === \"new\" ? setNewCliente(true) : setCliente(value);\r\n            }}\r\n          />\r\n        )}\r\n        <br />\r\n        <p style={{ display: \"inline-block\" }}>\r\n          <Popup\r\n            content=\"Credito\"\r\n            trigger={\r\n              <Button\r\n                icon\r\n                active={pago === \"Credito\"}\r\n                color={pago === \"Credito\" ? \"red\" : \"white\"}\r\n                onClick={() => {\r\n                  setPago(\"Credito\");\r\n                  setPayamt(0);\r\n                }}\r\n              >\r\n                <Icon name=\"thumbs down outline\" />\r\n              </Button>\r\n            }\r\n          ></Popup>\r\n          <Popup\r\n            trigger={\r\n              <Button\r\n                icon\r\n                active={pago === \"Contado\"}\r\n                color={pago === \"Contado\" ? \"green\" : \"white\"}\r\n                onClick={() => {\r\n                  setPago(\"Contado\");\r\n                  setPayamt(ttlamt);\r\n                }}\r\n              >\r\n                <Icon name=\"money bill alternate outline\" />\r\n              </Button>\r\n            }\r\n            content=\"Contado\"\r\n          ></Popup>\r\n          {pago === \"Contado\" && (\r\n            <Input\r\n              step=\"0.05\"\r\n              type=\"number\"\r\n              style={{ width: \"30%\" }}\r\n              defaultValue={payamt}\r\n              onChange={(e, { value }) => {\r\n                setPayamt(value);\r\n              }}\r\n            ></Input>\r\n          )}\r\n\r\n          <Popup\r\n            trigger={\r\n              <Button\r\n                icon\r\n                active\r\n                color={pedido === \"Retiro\" ? \"green\" : \"red\"}\r\n                onClick={() => {\r\n                  setPedido(pedido === \"Retiro\" ? \"Domicilio\" : \"Retiro\");\r\n                }}\r\n              >\r\n                <Icon name={pedido === \"Retiro\" ? \"user\" : \"truck\"} />\r\n              </Button>\r\n            }\r\n            content={pedido}\r\n          ></Popup>\r\n          <Button\r\n            color=\"green\"\r\n            disabled={!cliente || articulos.length === 0}\r\n            onClick={() => {\r\n              registrar();\r\n            }}\r\n          >\r\n            SAVE\r\n          </Button>\r\n          <h2>{ttlamt && currencyFormat(ttlamt)}</h2>\r\n        </p>\r\n      </Segment>\r\n      {!articulos && (\r\n        <Segment style={{ height: \"40vh\", overflowY: \"scroll\" }}>\r\n          {articulos.map((item) => (\r\n            <div style={{ display: \"inline-block\", width: \"40vw\" }}>\r\n              <Header>{item.name}</Header>\r\n\r\n              <Input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                style={{ width: \"30%\" }}\r\n                defaultValue={item.cant}\r\n                onChange={(e, { value }) => {\r\n                  ActCart(item.name, value, item.price);\r\n                  forceUpdate();\r\n                }}\r\n              ></Input>\r\n              <br />\r\n              <Input style={{ width: \"15%\" }} disabled>\r\n                {currencyFormat(item.amt)}\r\n              </Input>\r\n              <a\r\n                onClick={() => {\r\n                  QuitarArt(item.name);\r\n                }}\r\n              >\r\n                Quitar\r\n              </a>\r\n            </div>\r\n          ))}\r\n        </Segment>\r\n      )}\r\n      {articulos && (\r\n        <Segment style={{ height: \"40vh\", overflowY: \"scroll\" }}>\r\n          <Table unstackable>\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell>Producto</Table.HeaderCell>\r\n                <Table.HeaderCell>Cantidad</Table.HeaderCell>\r\n                <Table.HeaderCell>Monto</Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n\r\n            <Table.Body>\r\n              {articulos.map((item) => (\r\n                <Table.Row>\r\n                  <Table.Cell>\r\n                    <Header as=\"h4\" image>\r\n                      <Image src={item.src} rounded size=\"mini\" />\r\n                      <Header.Content>\r\n                        {item.name}\r\n                        <Header.Subheader>\r\n                          {currencyFormat(item.price)}\r\n                        </Header.Subheader>\r\n                      </Header.Content>\r\n                    </Header>\r\n                  </Table.Cell>\r\n                  <Table.Cell>{item.cant}</Table.Cell>\r\n                  <Table.Cell>{currencyFormat(item.amt)}</Table.Cell>\r\n                  <Table.Cell>\r\n                    <a\r\n                      href=\"#\"\r\n                      onClick={() => {\r\n                        setActiveItem((prevObject) => ({\r\n                          ...prevObject,\r\n                          name: item.name,\r\n                          price: item.price,\r\n                          src: item.src,\r\n                          id: item.id,\r\n                          cant: item.cant,\r\n                          amt: item.amt,\r\n                        }));\r\n                        setOpen(true);\r\n                      }}\r\n                    >\r\n                      Editar\r\n                    </a>\r\n                  </Table.Cell>\r\n                  <Table.Cell>\r\n                    <a\r\n                      href=\"#\"\r\n                      onClick={() => {\r\n                        setActiveItem((prevObject) => ({\r\n                          ...prevObject,\r\n                          name: item.name,\r\n                          price: item.price,\r\n                          src: item.src,\r\n                          id: item.id,\r\n                          cant: item.cant,\r\n                          amt: item.amt,\r\n                        }));\r\n                        setConfirmar(true);\r\n                      }}\r\n                    >\r\n                      Quitar\r\n                    </a>\r\n                  </Table.Cell>\r\n                </Table.Row>\r\n              ))}\r\n              <Table.Cell>\r\n                <b>TOTAL</b>\r\n              </Table.Cell>\r\n              <Table.Cell></Table.Cell>\r\n              <Table.Cell>\r\n                <b>{ttlamt && currencyFormat(ttlamt)}</b>\r\n              </Table.Cell>\r\n              <Table.Cell></Table.Cell>\r\n            </Table.Body>\r\n          </Table>\r\n        </Segment>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./App.css\";\r\nimport bocadillo from \"./images/bocadillo.png\";\r\nimport chocolate from \"./images/chocolate.png\";\r\nimport coca from \"./images/coca.png\";\r\nimport cena from \"./images/cena.png\";\r\nimport imageCompression from \"browser-image-compression\";\r\nimport { storage } from \"./firebase/firebase\";\r\n\r\nimport { Carrito } from \"./Contexto\";\r\nimport {\r\n  Container,\r\n  Segment,\r\n  Header,\r\n  Dropdown,\r\n  Table,\r\n  List,\r\n  Popup,\r\n  Image,\r\n  Label,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Dimmer,\r\n  Loader,\r\n  Input,\r\n  Divider,\r\n} from \"semantic-ui-react\";\r\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\r\n\r\nfunction currencyFormat(num) {\r\n  return \"$\" + num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\r\n}\r\n\r\nfunction FechaStringShort(fecha) {\r\n  var ye = new Intl.DateTimeFormat(\"en\", { year: \"numeric\" }).format(fecha);\r\n  var mo = new Intl.DateTimeFormat(\"en\", { month: \"numeric\" }).format(fecha);\r\n  var da = new Intl.DateTimeFormat(\"en\", { day: \"2-digit\" }).format(fecha);\r\n  var fechaStr = `${ye}-${mo < 10 ? \"0\" + mo : mo}-${da}`;\r\n  return fechaStr;\r\n}\r\n\r\nfunction compare(a, b) {\r\n  // Use toUpperCase() to ignore character casing\r\n  const fechaA = a.Cliente;\r\n  const fechaB = b.Cliente;\r\n\r\n  let comparison = 0;\r\n  if (fechaA < fechaB) {\r\n    comparison = -1;\r\n  } else if (fechaA > fechaB) {\r\n    comparison = 1;\r\n  }\r\n  return comparison;\r\n}\r\n\r\nfunction removeDuplicates(myArr, prop) {\r\n  return myArr.filter((obj, pos, arr) => {\r\n    return arr.map((mapObj) => mapObj[prop]).indexOf(obj[prop]) === pos;\r\n  });\r\n}\r\n\r\nclass TravellerCollection extends Array {\r\n  sum(key) {\r\n    return this.reduce((a, b) => a + (b[key] || 0), 0);\r\n  }\r\n}\r\n\r\nfunction ExcelDateToJSDate(serial) {\r\n  var utc_days = Math.floor(serial - 25568);\r\n  var utc_value = utc_days * 86400;\r\n  var date_info = new Date(utc_value * 1000);\r\n\r\n  var fractional_day = serial - Math.floor(serial) + 0.0000001;\r\n\r\n  var total_seconds = Math.floor(86400 * fractional_day);\r\n\r\n  var seconds = total_seconds % 60;\r\n\r\n  total_seconds -= seconds;\r\n\r\n  var hours = Math.floor(total_seconds / (60 * 60));\r\n  var minutes = Math.floor(total_seconds / 60) % 60;\r\n\r\n  var date_data = new Date(\r\n    date_info.getFullYear(),\r\n    date_info.getMonth(),\r\n    date_info.getDate(),\r\n    0,\r\n    0,\r\n    0\r\n  );\r\n\r\n  return date_data;\r\n}\r\n\r\nexport default function Clientes() {\r\n  //fechas\r\n  let today = new Date();\r\n  var dd = today.getDate();\r\n  var mm = today.getMonth() + 1;\r\n  var yyyy = today.getFullYear();\r\n  var hora = today.getHours();\r\n  var minutos = today.getMinutes();\r\n  dd < 10 ? (dd = \"0\" + dd) : (dd = today.getDate());\r\n  mm < 10 ? (mm = \"0\" + mm) : (mm = today.getMonth() + 1);\r\n  if (hora < 10) hora = \"0\" + hora;\r\n  if (minutos < 10) minutos = \"0\" + minutos;\r\n  let date = yyyy + \"-\" + mm + \"-\" + dd;\r\n  let fecha = date + \" \" + hora + \":\" + minutos;\r\n  let wd = today.getDay();\r\n  wd === 0 ? (wd = 7) : (wd = wd);\r\n  const [dataSemana, setDS] = useState();\r\n  let startDate = new Date(today);\r\n  startDate.setDate(startDate.getDate() - 15);\r\n  const [inicio, setInicio] = useState(FechaStringShort(startDate));\r\n  const [final, setFinal] = useState(FechaStringShort(today));\r\n  //fechas\r\n  const [sort_key, setSortKey] = useState(\"Fecha\");\r\n  const [sort_order, setSortOrder] = useState(\"descending\");\r\n  const [ttlAmt, setTtlamt] = useState(0);\r\n  const [pagado, setPagado] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [open, setOpen] = useState(false);\r\n  const [data, setData] = useState();\r\n  const [result,setResult] = useState()\r\n  const [buscar, setBuscar] = useState(\"\");\r\n  const [categoria, setCat] = useState(\"Snacks\");\r\n  const [cliente, setCliente] = useState(\"\");\r\n  const [listaClientes, setListaClientes] = useState();\r\n  const dummyImg = \"https://react.semantic-ui.com/images/wireframe/image.png\";\r\n  const [previewImg, setPreviewImg] = useState(dummyImg);\r\n  const [activeItem, setActiveItem] = useState(\"\");\r\n  const allInputs = { imgUrl: \"\" };\r\n  const [imageAsFile, setImageAsFile] = useState(\"\");\r\n  const [imageAsUrl, setImageAsUrl] = useState(allInputs);\r\n  const [subir, setSubir] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [payamt, setPayamt] = useState(0);\r\n  const [pago, setPago] = useState(\"Efectivo\");\r\n  const [saldoInicial, setSaldoInicial] = useState(0);\r\n  const [saldoFinal, setSaldoFinal] = useState(0);\r\n\r\n  const categorias = [\r\n    { name: \"Snacks\", src: bocadillo, categ: \"Snacks\" },\r\n    { name: \"Dulces\", src: chocolate, categ: \"Dulces\" },\r\n    { name: \"Bebidas\", src: coca, categ: \"Bebida\" },\r\n    { name: \"Otros\", src: cena, categ: \"Otros\" },\r\n  ];\r\n  const sacardata = async () => {\r\n    setLoading(true);\r\n    var data = [];\r\n    let datas = [];\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[0];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    const encabezado = await sheet.headerValues;\r\n    let lastr = rows.length + 1;\r\n    var j, i;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      data = [];\r\n      for (i = 0; i <= cols - 1; i++) {\r\n        window[\"Celda\" + j + i] = sheet.getCell(j, i).value;\r\n        if (encabezado[i] === \"Fecha\") {\r\n          window[\"Celda\" + j + i] = FechaStringShort(\r\n            ExcelDateToJSDate(window[\"Celda\" + j + i])\r\n          );\r\n        }\r\n        data[`${encabezado[i]}`] = window[\"Celda\" + j + i];\r\n      }\r\n      datas.push(data);\r\n    }\r\n    setData(datas);\r\n    console.log(datas);\r\n    setLoading(false);\r\n  };\r\n\r\n  async function handleImageUpload(event, id) {\r\n    console.log(id);\r\n    if (event.target.files && event.target.files[0]) {\r\n      const imageFile = event.target.files[0];\r\n      var reader = new FileReader();\r\n      var preview = document.getElementById(id);\r\n      reader.onload = function (e) {\r\n        preview.setAttribute(\"src\", e.target.result);\r\n      };\r\n\r\n      reader.readAsDataURL(event.target.files[0]);\r\n      const options = {\r\n        maxSizeMB: 1,\r\n        maxWidthOrHeight: 1920,\r\n        useWebWorker: true,\r\n      };\r\n      try {\r\n        const compressedFile = await imageCompression(imageFile, options);\r\n        setImageAsFile((imageFile) => compressedFile);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n      setSubir(true);\r\n    } else {\r\n      setSubir(false);\r\n      setImageAsFile(\"\");\r\n      setImageAsUrl(\"\");\r\n      preview = document.querySelector(id);\r\n      preview.setAttribute(\"src\", \"\");\r\n      var archivoSelect = document.querySelector(\"#anexoImg\");\r\n      archivoSelect.value = \"\";\r\n    }\r\n  }\r\n  const registrarPago = async () => {\r\n    if (!cliente) {\r\n      alert(\"Escriba su Nombre Completo\");\r\n    } else {\r\n      setSaving(true);\r\n      const creds = require(\"./samsnacks.json\"); // the file saved above\r\n      const doc = new GoogleSpreadsheet(\r\n        \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n      );\r\n      await doc.useServiceAccountAuth(creds);\r\n      await doc.loadInfo(); // loads document properties and worksheets\r\n      const sheet = doc.sheetsById[0];\r\n      const pedidoid = Date.now() + cliente.split(\" \").join(\"\");\r\n      var i;\r\n      const newData = await sheet.addRow({\r\n        Fecha: fecha,\r\n        Cliente: cliente,\r\n        Product_Id: \"PAGO\",\r\n        Product_Name: pago,\r\n        Cantidad: 0,\r\n        Monto: 0,\r\n        Payment_Method: \"Contado\",\r\n        Estatus: \"Completado\",\r\n        Entrega: \"NA\",\r\n        //Tel: tel,\r\n        NumPedido: pedidoid,\r\n        Payment_Amt: payamt,\r\n      });\r\n      alert(`Pago Realizado, su numero de pedido es ${pedidoid}`);\r\n      setCliente();\r\n      setData();\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleFireBaseUpload = (e) => {\r\n    if (subir) {\r\n      if (imageAsFile === \"\") {\r\n        console.error(\r\n          `not an image, the image file is a ${typeof imageAsFile}`\r\n        );\r\n      }\r\n      const uploadTask = storage\r\n        .ref(`/images/${imageAsFile.name}`)\r\n        .put(imageAsFile);\r\n      uploadTask.on(\r\n        \"state_changed\",\r\n        (snapShot) => {\r\n          //takes a snap shot of the process as it is happening\r\n          console.log(snapShot);\r\n        },\r\n        (err) => {\r\n          //catches the errors\r\n          console.log(err);\r\n        },\r\n        () => {\r\n          // gets the functions from storage refences the image storage in firebase by the children\r\n          // gets the download url then sets the image from firebase as the value for the imgUrl key:\r\n          storage\r\n            .ref(\"images\")\r\n            .child(imageAsFile.name)\r\n            .getDownloadURL()\r\n            .then((fireBaseUrl) => {\r\n              setImageAsUrl((prevObject) => ({\r\n                ...prevObject,\r\n                imgUrl: fireBaseUrl,\r\n              }));\r\n              console.log(fireBaseUrl);\r\n            });\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  const registrar = async () => {\r\n    setSaving(true);\r\n    console.log(activeItem);\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[711905343];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    let lastr = rows.length + 1;\r\n    var j;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      if (sheet.getCell(j, 0).value === activeItem.id) {\r\n        const precio = sheet.getCell(j, 2);\r\n        const imagen = sheet.getCell(j, 3);\r\n        const inventario = sheet.getCell(j, 5);\r\n        if (imageAsUrl.imgUrl) {\r\n          imagen.value = imageAsUrl.imgUrl;\r\n        }\r\n        precio.value = parseFloat(activeItem.price);\r\n        inventario.value = parseFloat(activeItem.disponible);\r\n        await sheet.saveUpdatedCells();\r\n        break;\r\n      }\r\n    }\r\n    setImageAsUrl(allInputs);\r\n    setSaving(false);\r\n  };\r\n  function ordenar(a, b) {\r\n    // Use toUpperCase() to ignore character casing\r\n    const fechaA = a[sort_key];\r\n    const fechaB = b[sort_key];\r\n\r\n    let comparison = 0;\r\n    if (fechaA < fechaB) {\r\n      sort_order === \"ascending\" ? (comparison = -1) : (comparison = 1);\r\n    } else if (fechaA > fechaB) {\r\n      sort_order === \"ascending\" ? (comparison = 1) : (comparison = -1);\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  var helper = {};\r\n\r\n  useEffect(() => {\r\n    !data && sacardata();\r\n    if (data){\r\n      const newArray = data.map(({Fecha, Entrega,Estatus,Cantidad,NumPedido,Payment_Method,Product_Id,Product_Name,Tel, ...item}) => item)\r\n      var temp = newArray.reduce(function(r, o) {\r\n        var key = o.Cliente;\r\n        if(!helper[key]) {\r\n          helper[key] = Object.assign({}, o); // create a copy of o\r\n          r.push(helper[key]);\r\n        } else {\r\n          helper[key].Monto += o.Monto;\r\n          helper[key].Payment_Amt += o.Payment_Amt;\r\n        }      \r\n        return r;\r\n      }, []);\r\n      temp.forEach(function (element) {\r\n        element.Saldo = element.Monto - element.Payment_Amt;\r\n      });\r\n      setResult(temp)\r\n    }\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    subir && handleFireBaseUpload();\r\n  }, [subir]);\r\n\r\n  useEffect(() => {\r\n    !data && sacardata();\r\n    if (data) {\r\n      var temp = removeDuplicates(\r\n        data\r\n          .sort(function ordenar(a, b) {\r\n            // Use toUpperCase() to ignore character casing\r\n            const fechaA = a[\"Cliente\"];\r\n            const fechaB = b[\"Cliente\"];\r\n\r\n            let comparison = 0;\r\n            if (fechaA < fechaB) {\r\n              comparison = -1;\r\n            } else if (fechaA > fechaB) {\r\n              comparison = 1;\r\n            }\r\n            return comparison;\r\n          })\r\n          .filter((item) => {\r\n            return item.Fecha >= inicio && item.Fecha <= final;\r\n          }),\r\n        \"Cliente\"\r\n      );\r\n      let templista = [];\r\n      var i;\r\n      for (i = 0; i < temp.length; i++) {\r\n        templista.push({\r\n          key: temp[i].Cliente,\r\n          value: temp[i].Cliente,\r\n          text: temp[i].Cliente,\r\n        });\r\n      }\r\n      setListaClientes(templista);\r\n    }\r\n  }, [data, inicio, final]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      let montoInicial = data\r\n        .filter((item) => {\r\n          return (\r\n            item.Cliente.toLowerCase().includes(\r\n              cliente ? cliente.toLowerCase() : cliente\r\n            ) && item.Fecha < inicio\r\n          );\r\n        })\r\n        .reduce((r, d) => r + d.Monto, 0);\r\n      let pagoInicial = data\r\n        .filter((item) => {\r\n          return (\r\n            item.Cliente.toLowerCase().includes(\r\n              cliente ? cliente.toLowerCase() : cliente\r\n            ) && item.Fecha < inicio\r\n          );\r\n        })\r\n        .reduce((r, d) => r + d.Payment_Amt, 0);\r\n      setSaldoInicial(montoInicial - pagoInicial);\r\n      let montoFinal = data\r\n        .filter((item) => {\r\n          return (\r\n            item.Cliente.toLowerCase().includes(\r\n              cliente ? cliente.toLowerCase() : cliente\r\n            ) &&\r\n            item.Fecha >= inicio &&\r\n            item.Fecha <= final\r\n          );\r\n        })\r\n        .reduce((r, d) => r + d.Monto, 0);\r\n      let pagoFinal = data\r\n        .filter((item) => {\r\n          return (\r\n            item.Cliente.toLowerCase().includes(\r\n              cliente ? cliente.toLowerCase() : cliente\r\n            ) &&\r\n            item.Fecha >= inicio &&\r\n            item.Fecha <= final\r\n          );\r\n        })\r\n        .reduce((r, d) => r + d.Payment_Amt, 0);\r\n      setTtlamt(montoFinal);\r\n      setPagado(pagoFinal);\r\n      setSaldoFinal(montoInicial - pagoInicial + montoFinal - pagoFinal);\r\n    }\r\n  }, [data, cliente, inicio, final]);\r\n\r\n  return (\r\n    <div className=\"Prueba\">\r\n      <Dimmer active={loading || saving} page>\r\n        <Loader>{saving ? \"Saving\" : \"Loading\"}</Loader>\r\n      </Dimmer>\r\n      <Modal open={open}>\r\n        <Modal.Header>{cliente && cliente.toUpperCase()}</Modal.Header>\r\n        <Modal.Content image>\r\n          <Modal.Description>\r\n            <Input\r\n              labelPosition=\"right\"\r\n              type=\"number\"\r\n              placeholder=\"Amount\"\r\n              onChange={(e) => {\r\n                setPayamt(e.target.value);\r\n              }}\r\n            >\r\n              <Label basic>$</Label>\r\n              <input\r\n                type=\"number\"\r\n                onChange={(e) => {\r\n                  setPayamt(e.target.value);\r\n                }}\r\n              />\r\n            </Input>\r\n            <Button\r\n              content={pago}\r\n              icon={pago === \"Efectivo\" ? \"dollar\" : \"exchange\"}\r\n              onClick={() => {\r\n                setPago(pago === \"Efectivo\" ? \"Wire\" : \"Efectivo\");\r\n              }}\r\n            ></Button>\r\n          </Modal.Description>\r\n        </Modal.Content>\r\n        <Modal.Actions>\r\n          <Button color=\"red\" onClick={() => setOpen(false)}>\r\n            Cancelar\r\n          </Button>\r\n          <Button\r\n            content=\"Guardar\"\r\n            labelPosition=\"right\"\r\n            icon=\"checkmark\"\r\n            onClick={() => {\r\n              registrarPago();\r\n              setOpen(false);\r\n            }}\r\n            positive\r\n          />\r\n        </Modal.Actions>\r\n      </Modal>\r\n      <Input\r\n        id=\"inicio\"\r\n        label=\"Inicio\"\r\n        size=\"mini\"\r\n        type=\"date\"\r\n        defaultValue={inicio}\r\n        onChange={(e) => {\r\n          setInicio(e.target.value);\r\n        }}\r\n      />\r\n      <Input\r\n        id=\"final\"\r\n        label=\"Final\"\r\n        size=\"mini\"\r\n        type=\"date\"\r\n        defaultValue={final}\r\n        onChange={(e) => {\r\n          setFinal(e.target.value);\r\n        }}\r\n      />\r\n      <Dropdown\r\n        style={{ marginTop: \"1%\" }}\r\n        placeholder=\"Clientes\"\r\n        fluid\r\n        clearable\r\n        search\r\n        selection\r\n        options={listaClientes}\r\n        onChange={(e, { value }) => {\r\n          setCliente(value);\r\n        }}\r\n      />\r\n      <div\r\n        style={{\r\n          height: \"80%\",\r\n          backgroundColor: \"lemonchiffon\",\r\n          marginTop: \"1%\",\r\n          overflowY: \"auto\",\r\n          padding: \"1%\",\r\n        }}\r\n      >\r\n        {cliente && (\r\n          <Button\r\n            color=\"green\"\r\n            icon=\"money\"\r\n            floated=\"right\"\r\n            onClick={() => setOpen(true)}\r\n          ></Button>\r\n        )}\r\n        <p>Saldo Inicial {cliente ? currencyFormat(saldoInicial) : null}</p>\r\n        <p>Consumo {cliente ? currencyFormat(ttlAmt) : null}</p>\r\n        <p>Pago {cliente ? currencyFormat(pagado) : null}</p>\r\n        <p>Saldo Final {cliente ? currencyFormat(saldoFinal) : null}</p>\r\n        {result && (\r\n          <Segment className=\"contenido\">\r\n            <Table unstackable>\r\n              <Table.Header>\r\n                <Table.Row>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Cliente\");\r\n                    }}\r\n                  >\r\n                    Cliente\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Cliente\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Saldo\");\r\n                    }}\r\n                  >\r\n                    Saldo\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Saldo\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Monto\");\r\n                    }}\r\n                  >\r\n                    Monto\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Monto\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Payment_Amt\");\r\n                    }}\r\n                  >\r\n                    Pago\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Payment_Amt\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                </Table.Row>\r\n              </Table.Header>\r\n\r\n              <Table.Body>\r\n                {result\r\n                  .filter((item) => {\r\n                    return (\r\n                      item.Cliente.toLowerCase().includes(\r\n                        cliente ? cliente.toLowerCase() : cliente\r\n                      )\r\n                    );\r\n                  }).sort(ordenar)\r\n                  .map((item) => (\r\n                    <Table.Row>\r\n                      <Table.Cell>{item.Cliente}</Table.Cell>\r\n                      <Table.Cell>{currencyFormat(item.Saldo)}</Table.Cell>\r\n                      <Table.Cell>{currencyFormat(item.Monto)}</Table.Cell>\r\n                      <Table.Cell>\r\n                        {currencyFormat(item.Payment_Amt?item.Payment_Amt:0)}\r\n                      </Table.Cell>\r\n                    </Table.Row>\r\n                  ))}\r\n              </Table.Body>\r\n            </Table>\r\n          </Segment>\r\n        )}\r\n        {data && (\r\n          <Segment className=\"contenido\">\r\n            <Table unstackable>\r\n              <Table.Header>\r\n                <Table.Row>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Fecha\");\r\n                    }}\r\n                  >\r\n                    Fecha\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Fecha\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Product_Name\");\r\n                    }}\r\n                  >\r\n                    Producto\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Product_Name\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Cliente\");\r\n                    }}\r\n                  >\r\n                    Cliente\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Cliente\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Cantidad\");\r\n                    }}\r\n                  >\r\n                    Cantidad\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Cantidad\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Monto\");\r\n                    }}\r\n                  >\r\n                    Monto\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Monto\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                  <Table.HeaderCell\r\n                    onClick={() => {\r\n                      setSortKey(\"Payment_Amt\");\r\n                    }}\r\n                  >\r\n                    Pago\r\n                    <Icon\r\n                      name={\r\n                        sort_order === \"ascending\"\r\n                          ? \"triangle up\"\r\n                          : \"triangle down\"\r\n                      }\r\n                      onClick={() => {\r\n                        setSortKey(\"Payment_Amt\");\r\n                        sort_order === \"ascending\"\r\n                          ? setSortOrder(\"descending\")\r\n                          : setSortOrder(\"ascending\");\r\n                      }}\r\n                    ></Icon>\r\n                  </Table.HeaderCell>\r\n                </Table.Row>\r\n              </Table.Header>\r\n\r\n              <Table.Body>\r\n                {data\r\n                  .filter((item) => {\r\n                    return (\r\n                      item.Cliente.toLowerCase().includes(\r\n                        cliente ? cliente.toLowerCase() : cliente\r\n                      ) &&\r\n                      item.Fecha >= inicio &&\r\n                      item.Fecha <= final\r\n                    );\r\n                  })\r\n                  .sort(function ordenar(a, b) {\r\n                    // Use toUpperCase() to ignore character casing\r\n                    const fechaA = a[\"Fecha\"];\r\n                    const fechaB = b[\"Fecha\"];\r\n\r\n                    let comparison = 0;\r\n                    if (fechaA < fechaB) {\r\n                      comparison = 1;\r\n                    } else if (fechaA > fechaB) {\r\n                      comparison = -1;\r\n                    }\r\n                    return comparison;\r\n                  })\r\n                  .sort(ordenar)\r\n                  .map((item) => (\r\n                    <Table.Row>\r\n                      <Table.Cell>{item.Fecha}</Table.Cell>\r\n                      <Table.Cell>{item.Product_Name}</Table.Cell>\r\n                      <Table.Cell>{item.Cliente}</Table.Cell>\r\n                      <Table.Cell>{item.Cantidad}</Table.Cell>\r\n                      <Table.Cell>{currencyFormat(item.Monto)}</Table.Cell>\r\n                      <Table.Cell>\r\n                        {currencyFormat(item.Payment_Amt)}\r\n                      </Table.Cell>\r\n                    </Table.Row>\r\n                  ))}\r\n              </Table.Body>\r\n            </Table>\r\n          </Segment>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useContext } from \"react\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport \"./App.css\";\r\nimport bocadillo from \"./images/bocadillo.png\";\r\nimport chocolate from \"./images/chocolate.png\";\r\nimport coca from \"./images/coca.png\";\r\nimport cena from \"./images/cena.png\";\r\nimport imageCompression from \"browser-image-compression\";\r\nimport { storage } from \"./firebase/firebase\";\r\n\r\nimport { Carrito } from \"./Contexto\";\r\nimport {\r\n  Container,\r\n  Segment,\r\n  Header,\r\n  Statistic,\r\n  Table,\r\n  List,\r\n  Popup,\r\n  Image,\r\n  Label,\r\n  Button,\r\n  Icon,\r\n  Modal,\r\n  Dimmer,\r\n  Loader,\r\n  Input,\r\n  Divider,\r\n  Dropdown,\r\n} from \"semantic-ui-react\";\r\nimport { GoogleSpreadsheet } from \"google-spreadsheet\";\r\n\r\nfunction currencyFormat(num) {\r\n  return \"$\" + num.toFixed(2).replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\r\n}\r\nfunction removeDuplicates(myArr, prop) {\r\n  return myArr.filter((obj, pos, arr) => {\r\n    return arr.map((mapObj) => mapObj[prop]).indexOf(obj[prop]) === pos;\r\n  });\r\n}\r\nfunction makeid(length) {\r\n  var result = \"\";\r\n  var characters =\r\n    \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n  var charactersLength = characters.length;\r\n  for (var i = 0; i < length; i++) {\r\n    result += characters.charAt(Math.floor(Math.random() * charactersLength));\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction compare(a, b, sort_key) {\r\n  // Use toUpperCase() to ignore character casing\r\n  const fechaA = a[sort_key];\r\n  const fechaB = b[sort_key];\r\n\r\n  let comparison = 0;\r\n  if (fechaA > fechaB) {\r\n    comparison = -1;\r\n  } else if (fechaA < fechaB) {\r\n    comparison = 1;\r\n  }\r\n  return comparison;\r\n}\r\n\r\nfunction ExcelDateToJSDate(serial) {\r\n  var utc_days = Math.floor(serial - 25568);\r\n  var utc_value = utc_days * 86400;\r\n  var date_info = new Date(utc_value * 1000);\r\n\r\n  var fractional_day = serial - Math.floor(serial) + 0.0000001;\r\n\r\n  var total_seconds = Math.floor(86400 * fractional_day);\r\n\r\n  var seconds = total_seconds % 60;\r\n\r\n  total_seconds -= seconds;\r\n\r\n  var hours = Math.floor(total_seconds / (60 * 60));\r\n  var minutes = Math.floor(total_seconds / 60) % 60;\r\n\r\n  var date_data = new Date(\r\n    date_info.getFullYear(),\r\n    date_info.getMonth(),\r\n    date_info.getDate(),\r\n    0,\r\n    0,\r\n    0\r\n  );\r\n\r\n  return date_data;\r\n}\r\n\r\nfunction FechaString(fecha) {\r\n  var ye = new Intl.DateTimeFormat(\"en\", { year: \"numeric\" }).format(fecha);\r\n  var mo = new Intl.DateTimeFormat(\"en\", { month: \"short\" }).format(fecha);\r\n  var da = new Intl.DateTimeFormat(\"en\", { day: \"2-digit\" }).format(fecha);\r\n  var fechaStr = `${da}-${mo}-${ye}`;\r\n  return fechaStr;\r\n}\r\n\r\nfunction FechaStringShort(fecha) {\r\n  var ye = new Intl.DateTimeFormat(\"en\", { year: \"numeric\" }).format(fecha);\r\n  var mo = new Intl.DateTimeFormat(\"en\", { month: \"numeric\" }).format(fecha);\r\n  var da = new Intl.DateTimeFormat(\"en\", { day: \"2-digit\" }).format(fecha);\r\n  var fechaStr = `${ye}-${mo < 10 ? \"0\" + mo : mo}-${da}`;\r\n  return fechaStr;\r\n}\r\n\r\nexport default function Detalles() {\r\n  //Fechas\r\n  //fechas estan erradas hay que corregir\r\n  let today = new Date();\r\n  let yesterday = new Date(today);\r\n  yesterday.setDate(yesterday.getDate() - 1);\r\n  let wd = today.getDay();\r\n  wd === 0 ? (wd = 7) : (wd = wd);\r\n  const [dataSemana, setDS] = useState();\r\n  const [inicio, setInicio] = useState(FechaStringShort(today));\r\n  const [final, setFinal] = useState(FechaStringShort(today));\r\n  //Fechas\r\n  const [data, setData] = useState();\r\n  const [loading, setLoading] = useState(false);\r\n  const [buscar, setBuscar] = useState(\"\");\r\n  const [cliente, setCliente] = useState(\"\");\r\n  const [listaClientes, setListaClientes] = useState();\r\n  const [listaProd, setListaProd] = useState();\r\n  const [sort_key, setSortKey] = useState(\"Product_Name\");\r\n  const [sort_order, setSortOrder] = useState(\"ascending\");\r\n  const [ttlAmt, setTtlamt] = useState(0);\r\n\r\n  function HandleData() {}\r\n\r\n  const sacardata = async () => {\r\n    setLoading(true);\r\n    var data = [];\r\n    let datas = [];\r\n    const creds = require(\"./samsnacks.json\"); // the file saved above\r\n    const doc = new GoogleSpreadsheet(\r\n      \"1usbvWq_DBOLN4j1wvK-l7QquTHe9yc9PqFRXhhOmZk0\"\r\n    );\r\n    await doc.useServiceAccountAuth(creds);\r\n    await doc.loadInfo(); // loads document properties and worksheets\r\n    const sheet = doc.sheetsById[0];\r\n    const rows = await sheet.getRows();\r\n    const cols = await sheet.columnCount;\r\n    const encabezado = await sheet.headerValues;\r\n    let lastr = rows.length + 1;\r\n    var j, i;\r\n    await sheet.loadCells({\r\n      // GridRange object\r\n      startRowIndex: 0,\r\n      endRowIndex: lastr,\r\n      startColumnIndex: 0,\r\n      endColumnIndex: cols,\r\n    });\r\n    for (j = 1; j < lastr; j++) {\r\n      data = [];\r\n      for (i = 0; i <= cols - 1; i++) {\r\n        window[\"Celda\" + j + i] = sheet.getCell(j, i).value;\r\n        if (encabezado[i] === \"Fecha\") {\r\n          window[\"Celda\" + j + i] = FechaStringShort(\r\n            ExcelDateToJSDate(window[\"Celda\" + j + i])\r\n          );\r\n        }\r\n        data[`${encabezado[i]}`] = window[\"Celda\" + j + i];\r\n      }\r\n      datas.push(data);\r\n    }\r\n    var helper = {};\r\n    var result = datas.reduce(function (r, o) {\r\n      var key = o.Fecha + \"-\" + o.Product_Name + \"-\" + o.Cliente;\r\n\r\n      if (!helper[key]) {\r\n        helper[key] = Object.assign({}, o); // create a copy of o\r\n        r.push(helper[key]);\r\n      } else {\r\n        helper[key].Cantidad += o.Cantidad;\r\n        helper[key].Monto += o.Monto;\r\n        helper[key].Payment_Amt += o.Payment_Amt;\r\n      }\r\n\r\n      return r;\r\n    }, []);\r\n\r\n    setData(result);\r\n    console.log(result);\r\n    setLoading(false);\r\n  };\r\n  function ordenar(a, b) {\r\n    // Use toUpperCase() to ignore character casing\r\n    const fechaA = a[sort_key];\r\n    const fechaB = b[sort_key];\r\n\r\n    let comparison = 0;\r\n    if (fechaA < fechaB) {\r\n      sort_order === \"ascending\" ? (comparison = -1) : (comparison = 1);\r\n    } else if (fechaA > fechaB) {\r\n      sort_order === \"ascending\" ? (comparison = 1) : (comparison = -1);\r\n    }\r\n    return comparison;\r\n  }\r\n\r\n  useEffect(() => {\r\n    !data && sacardata();\r\n    if (data) {\r\n      var temp = removeDuplicates(\r\n        data\r\n          .sort(function ordenar(a, b) {\r\n            // Use toUpperCase() to ignore character casing\r\n            const fechaA = a[\"Cliente\"];\r\n            const fechaB = b[\"Cliente\"];\r\n\r\n            let comparison = 0;\r\n            if (fechaA < fechaB) {\r\n              comparison = -1;\r\n            } else if (fechaA > fechaB) {\r\n              comparison = 1;\r\n            }\r\n            return comparison;\r\n          })\r\n          .filter((item) => {\r\n            return item.Fecha >= inicio && item.Fecha <= final;\r\n          }),\r\n        \"Cliente\"\r\n      );\r\n      let templista = [];\r\n      var i;\r\n      for (i = 0; i < temp.length; i++) {\r\n        templista.push({\r\n          key: temp[i].Cliente,\r\n          value: temp[i].Cliente,\r\n          text: temp[i].Cliente,\r\n        });\r\n      }\r\n      setListaClientes(templista);\r\n      temp = removeDuplicates(\r\n        data\r\n          .sort(function ordenar(a, b) {\r\n            // Use toUpperCase() to ignore character casing\r\n            const fechaA = a[\"Product_Name\"];\r\n            const fechaB = b[\"Product_Name\"];\r\n\r\n            let comparison = 0;\r\n            if (fechaA < fechaB) {\r\n              comparison = -1;\r\n            } else if (fechaA > fechaB) {\r\n              comparison = 1;\r\n            }\r\n            return comparison;\r\n          })\r\n          .filter((item) => {\r\n            return item.Fecha >= inicio && item.Fecha <= final;\r\n          }),\r\n        \"Product_Name\"\r\n      );\r\n      templista = [];\r\n      for (i = 0; i < temp.length; i++) {\r\n        templista.push({\r\n          key: temp[i].Product_Name,\r\n          value: temp[i].Product_Name,\r\n          text: temp[i].Product_Name,\r\n        });\r\n      }\r\n      setListaProd(templista);\r\n    }\r\n  }, [data, inicio, final]);\r\n\r\n  useEffect(() => {\r\n    if (data) {\r\n      var i;\r\n      for (i = 0; i < data.length; i++) {\r\n        let result = data\r\n          .filter((item) => {\r\n            return (\r\n              item.Product_Name.toLowerCase().includes(\r\n                buscar ? buscar.toLowerCase() : buscar\r\n              ) &&\r\n              item.Cliente.toLowerCase().includes(\r\n                cliente ? cliente.toLowerCase() : cliente\r\n              ) &&\r\n              item.Fecha >= inicio &&\r\n              item.Fecha <= final\r\n            );\r\n          })\r\n          .reduce((r, d) => r + d.Monto, 0);\r\n        setTtlamt(result);\r\n      }\r\n    }\r\n  }, [data, cliente, buscar, inicio, final]);\r\n  return (\r\n    <Container>\r\n      <Dimmer active={loading} page>\r\n        <Loader>\"Loading\"</Loader>\r\n      </Dimmer>\r\n      <Header>Detalle de Ventas</Header>\r\n      <Input\r\n        id=\"inicio\"\r\n        label=\"Inicio\"\r\n        size=\"mini\"\r\n        type=\"date\"\r\n        defaultValue={inicio}\r\n        onChange={(e) => {\r\n          setInicio(e.target.value);\r\n        }}\r\n      />\r\n      <Input\r\n        id=\"final\"\r\n        label=\"Final\"\r\n        size=\"mini\"\r\n        type=\"date\"\r\n        defaultValue={final}\r\n        onChange={(e) => {\r\n          setFinal(e.target.value);\r\n        }}\r\n      />\r\n      <Dropdown\r\n        placeholder=\"Products\"\r\n        fluid\r\n        clearable\r\n        search\r\n        selection\r\n        options={listaProd}\r\n        onChange={(e, { value }) => {\r\n          setBuscar(value);\r\n        }}\r\n      />\r\n      <Dropdown\r\n        placeholder=\"Clientes\"\r\n        fluid\r\n        clearable\r\n        search\r\n        selection\r\n        options={listaClientes}\r\n        onChange={(e, { value }) => {\r\n          setCliente(value);\r\n        }}\r\n      />\r\n      {data && (\r\n        <Segment className=\"contenido\">\r\n          <Table basic=\"very\" celled collapsing>\r\n            <Table.Header>\r\n              <Table.Row>\r\n                <Table.HeaderCell\r\n                  onClick={() => {\r\n                    setSortKey(\"Fecha\");\r\n                  }}\r\n                >\r\n                  Fecha\r\n                  <Icon\r\n                    name={\r\n                      sort_order === \"ascending\"\r\n                        ? \"triangle up\"\r\n                        : \"triangle down\"\r\n                    }\r\n                    onClick={() => {\r\n                      setSortKey(\"Fecha\");\r\n                      sort_order === \"ascending\"\r\n                        ? setSortOrder(\"descending\")\r\n                        : setSortOrder(\"ascending\");\r\n                    }}\r\n                  ></Icon>\r\n                </Table.HeaderCell>\r\n                <Table.HeaderCell\r\n                  onClick={() => {\r\n                    setSortKey(\"Product_Name\");\r\n                  }}\r\n                >\r\n                  Producto\r\n                  <Icon\r\n                    name={\r\n                      sort_order === \"ascending\"\r\n                        ? \"triangle up\"\r\n                        : \"triangle down\"\r\n                    }\r\n                    onClick={() => {\r\n                      setSortKey(\"Product_Name\");\r\n                      sort_order === \"ascending\"\r\n                        ? setSortOrder(\"descending\")\r\n                        : setSortOrder(\"ascending\");\r\n                    }}\r\n                  ></Icon>\r\n                </Table.HeaderCell>\r\n                <Table.HeaderCell\r\n                  onClick={() => {\r\n                    setSortKey(\"Cliente\");\r\n                  }}\r\n                >\r\n                  Cliente\r\n                  <Icon\r\n                    name={\r\n                      sort_order === \"ascending\"\r\n                        ? \"triangle up\"\r\n                        : \"triangle down\"\r\n                    }\r\n                    onClick={() => {\r\n                      setSortKey(\"Cliente\");\r\n                      sort_order === \"ascending\"\r\n                        ? setSortOrder(\"descending\")\r\n                        : setSortOrder(\"ascending\");\r\n                    }}\r\n                  ></Icon>\r\n                </Table.HeaderCell>\r\n                <Table.HeaderCell\r\n                  onClick={() => {\r\n                    setSortKey(\"Cantidad\");\r\n                  }}\r\n                >\r\n                  Cantidad\r\n                  <Icon\r\n                    name={\r\n                      sort_order === \"ascending\"\r\n                        ? \"triangle up\"\r\n                        : \"triangle down\"\r\n                    }\r\n                    onClick={() => {\r\n                      setSortKey(\"Cantidad\");\r\n                      sort_order === \"ascending\"\r\n                        ? setSortOrder(\"descending\")\r\n                        : setSortOrder(\"ascending\");\r\n                    }}\r\n                  ></Icon>\r\n                </Table.HeaderCell>\r\n                <Table.HeaderCell\r\n                  onClick={() => {\r\n                    setSortKey(\"Monto\");\r\n                  }}\r\n                >\r\n                  Monto\r\n                  <Icon\r\n                    name={\r\n                      sort_order === \"ascending\"\r\n                        ? \"triangle up\"\r\n                        : \"triangle down\"\r\n                    }\r\n                    onClick={() => {\r\n                      setSortKey(\"Monto\");\r\n                      sort_order === \"ascending\"\r\n                        ? setSortOrder(\"descending\")\r\n                        : setSortOrder(\"ascending\");\r\n                    }}\r\n                  ></Icon>\r\n                </Table.HeaderCell>\r\n                <Table.HeaderCell\r\n                  onClick={() => {\r\n                    setSortKey(\"Payment_Amt\");\r\n                  }}\r\n                >\r\n                  Pago\r\n                  <Icon\r\n                    name={\r\n                      sort_order === \"ascending\"\r\n                        ? \"triangle up\"\r\n                        : \"triangle down\"\r\n                    }\r\n                    onClick={() => {\r\n                      setSortKey(\"Payment_Amt\");\r\n                      sort_order === \"ascending\"\r\n                        ? setSortOrder(\"descending\")\r\n                        : setSortOrder(\"ascending\");\r\n                    }}\r\n                  ></Icon>\r\n                </Table.HeaderCell>\r\n              </Table.Row>\r\n            </Table.Header>\r\n\r\n            <Table.Body>\r\n              {ttlAmt !== 0 && (\r\n                <Table.Row>\r\n                  <Table.Cell colSpan=\"4\">Total</Table.Cell>\r\n                  <Table.Cell>{currencyFormat(ttlAmt)}</Table.Cell>\r\n                  <Table.Cell></Table.Cell>\r\n                </Table.Row>\r\n              )}\r\n              {data\r\n                .filter((item) => {\r\n                  return (\r\n                    item.Product_Name.toLowerCase().includes(\r\n                      buscar ? buscar.toLowerCase() : buscar\r\n                    ) &&\r\n                    item.Cliente.toLowerCase().includes(\r\n                      cliente ? cliente.toLowerCase() : cliente\r\n                    ) &&\r\n                    item.Fecha >= inicio &&\r\n                    item.Fecha <= final\r\n                  );\r\n                })\r\n                .sort(function ordenar(a, b) {\r\n                  // Use toUpperCase() to ignore character casing\r\n                  const fechaA = a[\"Monto\"];\r\n                  const fechaB = b[\"Monto\"];\r\n\r\n                  let comparison = 0;\r\n                  if (fechaA < fechaB) {\r\n                    comparison = 1;\r\n                  } else if (fechaA > fechaB) {\r\n                    comparison = -1;\r\n                  }\r\n                  return comparison;\r\n                })\r\n                .sort(ordenar)\r\n                .map((item) => (\r\n                  <Table.Row>\r\n                    <Table.Cell>{item.Fecha}</Table.Cell>\r\n                    <Table.Cell>{item.Product_Name}</Table.Cell>\r\n                    <Table.Cell>{item.Cliente}</Table.Cell>\r\n                    <Table.Cell>{item.Cantidad}</Table.Cell>\r\n                    <Table.Cell>{currencyFormat(item.Monto)}</Table.Cell>\r\n                    <Table.Cell>{currencyFormat(item.Payment_Amt)}</Table.Cell>\r\n                  </Table.Row>\r\n                ))}\r\n            </Table.Body>\r\n          </Table>\r\n        </Segment>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport \"./App.css\";\r\nimport \"semantic-ui-css/semantic.min.css\";\r\nimport Logo from \"./images/logo2.png\";\r\nimport { BrowserRouter as Router, Route, Switch, Link } from \"react-router-dom\";\r\nimport {\r\n  Image,\r\n  Container,\r\n  Header,\r\n  Card,\r\n  Label,\r\n  Popup,\r\n  Rating,\r\n  Radio,\r\n  Dimmer,\r\n  Loader,\r\n  Button,\r\n  Divider,\r\n  Segment,\r\n  Dropdown,\r\n  Icon,\r\n  Input,\r\n  Modal,\r\n  Grid,\r\n  Item,\r\n  Checkbox,\r\n  Menu,\r\n} from \"semantic-ui-react\";\r\nimport Home from \"./Home\";\r\nimport Productos from \"./Productos\";\r\nimport Cart from \"./Cart\";\r\nimport Clientes from \"./Clientes\";\r\nimport Detalles from \"./Detalles\";\r\nimport { Carrito } from \"./Contexto\";\r\n\r\nexport default function APP() {\r\n  const [user, setUser] = useState(\"\");\r\n  const [activeMenu, setActiveMenu] = useState(\"home\");\r\n  const { cantidades } = useContext(Carrito);\r\n\r\n  function SelectMenu(e, { name }) {\r\n    setActiveMenu(name);\r\n  }\r\n  return (\r\n    <Router basename={\"/samsnacksadmin\"}>\r\n      <div style={{ padding: \"1%\" }}>\r\n        <Image src={Logo} size=\"tiny\" className=\"bajar\" />\r\n\r\n        <div style={{ height: \"75vh\", overFlowY: \"scroll\" }}>\r\n          <Switch>\r\n            <Route\r\n              path=\"/cart\"\r\n              render={(props) => <Cart {...props} user={user} />}\r\n            />\r\n            <Route\r\n              path=\"/productos\"\r\n              render={(props) => <Productos {...props} user={user} />}\r\n            />\r\n\r\n            <Route\r\n              path=\"/clientes\"\r\n              render={(props) => <Clientes {...props} user={user} />}\r\n            />\r\n            <Route\r\n              path=\"/Detalle\"\r\n              render={(props) => <Detalles {...props} user={user} />}\r\n            />\r\n            <Route\r\n              path=\"/\"\r\n              render={(props) => <Home {...props} user={user} />}\r\n            />\r\n          </Switch>\r\n        </div>\r\n        <Menu icon=\"labeled\" fluid widths={5} color=\"red\">\r\n          <Menu.Item\r\n            name=\"home\"\r\n            onClick={SelectMenu}\r\n            active={activeMenu === \"home\"}\r\n            as={Link}\r\n            to=\"/\"\r\n          >\r\n            <Icon name=\"home\" />\r\n            Inicio\r\n          </Menu.Item>\r\n\r\n          <Menu.Item\r\n            name=\"productos\"\r\n            onClick={SelectMenu}\r\n            active={activeMenu === \"productos\"}\r\n            as={Link}\r\n            to=\"/productos\"\r\n          >\r\n            <Icon name=\"food\" />\r\n            Productos\r\n          </Menu.Item>\r\n          <Menu.Item\r\n            name=\"datos\"\r\n            onClick={SelectMenu}\r\n            active={activeMenu === \"datos\"}\r\n            as={Link}\r\n            to=\"/Detalle\"\r\n          >\r\n            <Icon name=\"chart line\" />\r\n            Reporte\r\n          </Menu.Item>\r\n\r\n          <Menu.Item\r\n            name=\"user\"\r\n            onClick={SelectMenu}\r\n            active={activeMenu === \"user\"}\r\n            as={Link}\r\n            to=\"/clientes\"\r\n          >\r\n            <Icon name=\"user\" />\r\n            Clientes\r\n          </Menu.Item>\r\n\r\n          <Menu.Item\r\n            name=\"shop\"\r\n            onClick={SelectMenu}\r\n            active={activeMenu === \"shop\"}\r\n            as={Link}\r\n            to=\"/cart\"\r\n          >\r\n            <Icon name=\"shop\" />\r\n            <Label circular color=\"red\" floating>\r\n              {cantidades}\r\n            </Label>\r\n            Carrito\r\n          </Menu.Item>\r\n        </Menu>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./Test\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport CarritoProvider from \"./Contexto\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <CarritoProvider>\n      <App />\n    </CarritoProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}